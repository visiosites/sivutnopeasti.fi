<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tilaus | Sivutnopeasti.fi</title>
    <meta name="robots" content="noindex, nofollow">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Cormorant+Garamond:wght@300;400;500;600;700&family=Libre+Baskerville:wght@400;700&family=Roboto:wght@300;400;500&family=Montserrat:wght@300;400;500;600;700;800&family=Cinzel:wght@400;500;600;700&family=Merriweather:wght@300;400;700&family=Lora:wght@400;500;600&family=Great+Vibes&family=Bebas+Neue&family=Raleway:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600&family=Ubuntu:wght@300;400;500;700&family=Nunito:wght@300;400;600;700;800&family=Rubik:wght@300;400;500;600;700&family=Work+Sans:wght@300;400;500;600;700&family=Quicksand:wght@300;400;500;600;700&family=Karla:wght@300;400;500;600;700&family=Josefin+Sans:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Abril+Fatface&family=Righteous&family=Fredoka:wght@300;400;500;600&family=Prata&family=Cormorant:wght@300;400;500;600;700&family=Old+Standard+TT:wght@400;700&family=Cardo:wght@400;700&family=Frank+Ruhl+Libre:wght@300;400;500;700&family=DM+Serif+Display&family=Yeseva+One&family=Josefin+Slab:wght@300;400;500;600;700&family=Zilla+Slab:wght@300;400;500;600;700&family=Sora:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700;800&family=Syne:wght@400;500;600;700;800&family=Outfit:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Satoshi:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body class="order-page">

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingText">Pakataan kuvia...</p>
    </div>

    <div class="order-container">
        <div class="order-header">
            <h1>Verkkosivujen tilaus</h1>
            <p>Valitse oma polkusi ja r√§√§t√§l√∂i sivustosi</p>
        </div>

        <div class="order-form-container">
            <div class="progress-bar" id="progressBar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="5">
                <div class="progress-step active" data-step="1">1</div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-step" data-step="4">4</div>
                <div class="progress-step" data-step="5">5</div>
            </div>

            <form action="https://formspree.io/f/xvzbgpoz" method="POST" enctype="multipart/form-data" id="tilausForm" novalidate>
                <input type="hidden" name="_subject" value="Uusi verkkosivutilaus - SIVUTNOPEASTI.FI">
                <input type="text" name="_gotcha" class="honeypot">
                
                <!-- STEP 1 -->
                <div class="form-section active" data-section="1">
                    <h2 class="section-title">Perustiedot</h2>
                    <p class="section-subtitle">Kerro meille yrityksest√§si</p>
                    
                    <div class="form-group">
                        <label for="yritysnimi">Yrityksen nimi <span class="required">*</span></label>
                        <input type="text" name="yritysnimi" id="yritysnimi" required placeholder="Esimerkki Oy">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ytunnus">Y-tunnus</label>
                            <input type="text" name="ytunnus" id="ytunnus" placeholder="1234567-8">
                            <div class="hint">Muoto: 1234567-8</div>
                        </div>
                        <div class="form-group">
                            <label for="toimiala">Toimiala <span class="required">*</span></label>
                            <select name="toimiala" id="toimiala" required>
                                <option value="">Valitse...</option>
                                <option value="kampaamo">Kampaamo / Parturi</option>
                                <option value="kauneushoitola">Kauneushoitola</option>
                                <option value="kynsiteknikko">Kynsiteknikko</option>
                                <option value="hieroja">Hieroja / Fysioterapeutti</option>
                                <option value="pt">Personal Trainer</option>
                                <option value="muu">Muu palveluala</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="osoite">Osoite <span class="required">*</span></label>
                        <input type="text" name="osoite" id="osoite" required placeholder="Katuosoite, postinumero Kaupunki">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="puhelin">Puhelin <span class="required">*</span></label>
                            <input type="tel" name="puhelin" id="puhelin" required placeholder="040 123 4567">
                        </div>
                        <div class="form-group">
                            <label for="email">S√§hk√∂posti <span class="required">*</span></label>
                            <input type="email" name="email" id="email" required placeholder="sahkoposti@yritys.fi">
                        </div>
                    </div>

                    <div class="button-group">
                        <div></div>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Seuraava ‚Üí</button>
                    </div>
                </div>

                <!-- STEP 2: Tyyli -->
                <div class="form-section" data-section="2">
                    <h2 class="section-title">Valitse tyyli</h2>
                    <p class="section-subtitle">Millaisen ilmeen haluat sivuillesi?</p>
                    
                    <div class="style-grid">
                        <label class="style-option" onclick="selectStyle('klassinen')">
                            <input type="radio" name="valittu_tyyli" value="Klassinen" required>
                            <div class="style-card klassinen">
                                <div class="style-icon">K</div>
                                <div class="style-name">Klassinen</div>
                                <div class="style-desc">Ajaton elegance ja perinteinen tyyli. Sopii yrityksille, jotka haluavat luotettavan ja arvokkaan imagon.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('moderni')">
                            <input type="radio" name="valittu_tyyli" value="Moderni">
                            <div class="style-card moderni">
                                <div class="style-icon">M</div>
                                <div class="style-name">Moderni</div>
                                <div class="style-desc">Puhtaat linjat ja minimalistinen design. T√§ydellinen nykyaikaisille yrityksille, jotka arvostavat selkeytt√§.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('luksus')">
                            <input type="radio" name="valittu_tyyli" value="Luksus">
                            <div class="style-card luksus">
                                <div class="style-icon">L</div>
                                <div class="style-name">Luksus</div>
                                <div class="style-desc">Kultaa, mustaa ja premium-tunnelmaa. Korosta laatua ja eksklusiivisuutta t√§m√§n tyylikk√§√§n ilmeen avulla.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('kotoisa')">
                            <input type="radio" name="valittu_tyyli" value="Kotoisa">
                            <div class="style-card kotoisa">
                                <div class="style-icon">O</div>
                                <div class="style-name">Kotoisa</div>
                                <div class="style-desc">L√§mpimi√§ s√§vyj√§ ja kutsuva tunnelma. Ihanteellinen yrityksille, jotka haluavat v√§litt√§√§ l√§heisyytt√§ ja mukavuutta.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('elegantti')">
                            <input type="radio" name="valittu_tyyli" value="Elegantti">
                            <div class="style-card elegantti">
                                <div class="style-icon">E</div>
                                <div class="style-name">Elegantti</div>
                                <div class="style-desc">Hienostunutta kauneutta ja naisellista charmia. Roosaa, kultaa ja pehmeit√§ muotoja.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('creative')">
                            <input type="radio" name="valittu_tyyli" value="Luova">
                            <div class="style-card creative">
                                <div class="style-icon">L</div>
                                <div class="style-name">Luova</div>
                                <div class="style-desc">Rohkeita v√§rej√§ ja erottuva ilme. Valitse t√§m√§, jos haluat erottua joukosta ja n√§ytt√§√§ persoonallisuutesi.</div>
                            </div>
                        </label>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()" id="tyyliSeuraava" disabled>Seuraava ‚Üí</button>
                    </div>
                </div>

                <!-- STEP 3: Fontti -->
                <div class="form-section" data-section="3">
                    <h2 class="section-title">Valitse fontti</h2>
                    <p class="section-subtitle" id="fonttiSubtitle">Valitse tyyli ensin</p>
                    
                    <div class="option-grid" id="fonttiGrid"></div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div>
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()" id="fonttiSeuraava" disabled>Seuraava ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- STEP 4: V√§rit -->
                <div class="form-section" data-section="4">
                    <h2 class="section-title">Valitse v√§riteema</h2>
                    <p class="section-subtitle" id="variSubtitle">Valitse tyyli ensin</p>
                    
                    <div class="option-grid" id="variGrid"></div>

                    <div class="custom-color-section" id="customColorSection">
                        <div class="custom-color-header">üé® M√§√§rit√§ omat v√§risi</div>
                        <div class="color-picker-wrapper">
                            <div class="picker-area">
                                <div class="color-input-group">
                                    <label>Valitse p√§√§v√§ri</label>
                                    <input type="color" id="colorPicker" value="#1a5f4a">
                                </div>
                                <div class="color-input-group">
                                    <label>tai sy√∂t√§ HEX-koodi</label>
                                    <div class="hex-input-wrapper">
                                        <span class="hex-prefix">#</span>
                                        <input type="text" class="hex-input" id="hexInput" placeholder="1a5f4a" maxlength="6">
                                    </div>
                                </div>
                            </div>
                            <div class="color-preview-box">
                                <div class="preview-title">Esikatselu</div>
                                <div class="preview-sample" id="colorPreview">
                                    <div class="preview-text">Yrityksesi nimi</div>
                                    <div class="preview-subtext">Esimerkkiteksti</div>
                                </div>
                                <div class="selected-color-display" id="colorDisplay">#1a5f4a ‚Üí #0f3d2e</div>
                            </div>
                        </div>
                        <input type="hidden" name="oma_hex_vari" id="customColorValue">
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div>
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()" id="variSeuraava" disabled>Seuraava ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- STEP 5: Sis√§lt√∂ -->
                <div class="form-section" data-section="5">
                    <h2 class="section-title">Sis√§lt√∂ ja kuvat</h2>
                    <p class="section-subtitle">Kerro palveluistasi ja lis√§√§ kuvia</p>
                    
                    <div class="form-group">
                        <label for="palvelut">Palvelut <span class="required">*</span></label>
                        <textarea name="palvelut" id="palvelut" required placeholder="Kuvaile mit√§ palveluita tarjoat..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Hinnasto</label>
                        <div class="hinnasto-tabs">
                            <button type="button" class="hinnasto-tab active" onclick="switchHinnasto('text')">Kirjoita itse</button>
                            <button type="button" class="hinnasto-tab" onclick="switchHinnasto('file')">Lataa tiedosto</button>
                        </div>
                        <div id="hinnastoTextSection">
                            <textarea name="hinnasto" id="hinnasto" placeholder="Palvelut ja hinnat..."></textarea>
                        </div>
                        <div id="hinnastoFileSection">
                            <div class="hinnasto-upload-area" id="hinnastoDropZone">
                                <input type="file" name="hinnasto_tiedosto" id="hinnastoFileInput"
                                    accept=".pdf,.doc,.docx,.txt,.xls,.xlsx,.odt,.ods,.rtf,.csv">
                                <div class="upload-icon">üìÑ</div>
                                <div class="upload-text">
                                    <strong>Raahaa tiedosto t√§h√§n</strong>
                                    <span>tai klikkaa valitaksesi</span>
                                </div>
                                <div class="upload-limit">PDF, Word (.doc/.docx), Excel, TXT, RTF...</div>
                            </div>
                            <div class="hinnasto-file-info" id="hinnastoFileInfo">
                                <span>üìÑ</span>
                                <span id="hinnastoFileName"></span>
                                <button type="button" class="remove-btn" onclick="clearHinnastoFile()">‚úï Poista</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="aukiolo">Avoinnaoloajat</label>
                            <input type="text" name="aukiolo" id="aukiolo" placeholder="Ma-pe 9-17">
                        </div>
                        <div class="form-group">
                            <label for="instagram">Instagram</label>
                            <input type="text" name="instagram" id="instagram" placeholder="@yritys">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="facebook">Facebook</label>
                        <input type="text" name="facebook" id="facebook" placeholder="Yrityksen nimi">
                    </div>

                    <!-- Logo -->
                    <div class="form-group">
                        <label>Lis√§√§ logo (valinnainen)</label>
                        <div class="logo-upload-area" id="logoDropZone">
                            <input type="file" name="logo" id="logoInput" accept="image/svg+xml,image/png,image/jpeg,image/webp">
                            <div class="logo-icon">üè∑Ô∏è</div>
                            <div class="logo-text">
                                <strong>Raahaa logo t√§h√§n</strong>
                                <span>tai klikkaa valitaksesi</span>
                            </div>
                            <div class="logo-hint">Suositeltu: SVG, PNG tai JPEG ‚Ä¢ Kuvat pakataan automaattisesti</div>
                        </div>
                        <div class="error-message" id="logoError"></div>
                        <div class="compression-info" id="logoCompressionInfo"></div>
                        <div class="image-preview-container" id="logoPreviewContainer">
                            <div class="preview-header">
                                <span class="preview-count">Logo valittu</span>
                                <button type="button" class="clear-all-btn" onclick="clearLogo()">Poista</button>
                            </div>
                            <div class="image-preview-grid" id="logoPreviewGrid"></div>
                        </div>
                    </div>

                    <!-- Kuvat -->
                    <div class="form-group">
                        <label>Lis√§√§ kuvia (valinnainen, max 10 kuvaa)</label>
                        <div class="file-upload-area" id="dropZone">
                            <input type="file" name="kuvat" id="fileInput" multiple accept="image/*">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">
                                <strong>Klikkaa lis√§t√§ksesi kuvia</strong>
                                <span>tai raahaa ne t√§h√§n</span>
                            </div>
                            <div class="upload-limit">Max 10 kuvaa ‚Ä¢ Kuvat pakataan automaattisesti ennen l√§hetyst√§</div>
                            <div class="upload-alternative">
                                tai l√§het√§ s√§hk√∂postilla <a href="mailto:sivut@sivutnopeasti.fi">sivut@sivutnopeasti.fi</a>
                            </div>
                        </div>
                        <div class="error-message" id="uploadError"></div>
                        <div class="compression-info" id="compressionInfo"></div>
                        <div class="image-preview-container" id="imagePreviewContainer">
                            <div class="preview-header">
                                <span class="preview-count" id="previewCount">Valittuja kuvia: 0 / 10</span>
                                <button type="button" class="clear-all-btn" onclick="clearAllImages()">Poista kaikki</button>
                            </div>
                            <div class="image-preview-grid" id="imagePreviewGrid"></div>
                        </div>
                    </div>

                    <!-- UUSI TEKSTIKENTT√Ñ: Kerro vapaasti toiveistasi -->
                    <div class="form-group">
                        <label for="vapaat_toiveet">Kerro vapaasti toiveistasi</label>
                        <textarea name="vapaat_toiveet" id="vapaat_toiveet" placeholder="Kerro t√§h√§n vapaasti toiveistasi. Mit√§ tyyli√§, tunnelmaa tai v√§rej√§ kaipaat? Onko olemassa sivustoja, joista pid√§t? Mit√§ haluat sivuillasi ehdottomasti olevan? Mit√§ yksityiskohtia pid√§t t√§rke√§n√§? Mit√§ enemm√§n kerrot, sit√§ paremmin voimme toteuttaa juuri sinulle sopivat sivut. Voit my√∂s liitt√§√§ linkkej√§ inspiraatioksi!"></textarea>
                        <div class="hint">Mit√§ tarkemmin kerrot toiveistasi, sit√§ paremmin pystymme toteuttamaan juuri sinulle sopivat sivut. Ei ole v√§√§ri√§ vastauksia!</div>
                    </div>

                    <div class="form-group">
                        <label for="paketti">Valitse paketti <span class="required">*</span></label>
                        <select name="paketti" id="paketti" required>
                            <option value="">Valitse...</option>
                            <option value="12kk">169 ‚Ç¨ + 8,90 ‚Ç¨ / kk (laskutus 12 kk v√§lein)</option>
                            <option value="1kk">169 ‚Ç¨ + 12,90 ‚Ç¨ / kk (laskutus 1 kk v√§lein)</option>
                            <option value="ei_tieda">En ole varma, keskustellaan</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="toiveet">Lis√§toiveet</label>
                        <textarea name="toiveet" id="toiveet" placeholder="Galleria, blogi, lahjakortit..."></textarea>
                    </div>

                    <div class="summary-box">
                        <h3>Valintasi</h3>
                        <div class="summary-item">
                            <span>Tyyli:</span>
                            <span id="summaryTyyli" class="change-link" onclick="goToStep(2)">Vaihda</span>
                        </div>
                        <div class="summary-item">
                            <span>Fontti:</span>
                            <span id="summaryFontti" class="change-link" onclick="goToStep(3)">Vaihda</span>
                        </div>
                        <div class="summary-item">
                            <span>V√§riteema:</span>
                            <span id="summaryVari" class="change-link" onclick="goToStep(4)">Vaihda</span>
                        </div>
                        <div class="summary-item hidden" id="summaryHexRow">
                            <span>Oma v√§ri:</span>
                            <span id="summaryHex"></span>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div class="submit-area">
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="submit" class="btn btn-primary" id="submitBtn">L√§het√§ tilaus</button>
                            <p class="submit-hint">L√§het√§ tilaus ja saat sivun esikatselun veloituksetta</p>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Laajennettu fonttikokoelma (10+ per tyyli)
        const fontit = {
            klassinen: [
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Merriweather', esimerkki: 'Aa', class: 'Merriweather' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' },
                { nimi: 'Cinzel', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Old Standard TT', esimerkki: 'Aa', class: 'Old Standard TT' },
                { nimi: 'Cardo', esimerkki: 'Aa', class: 'Cardo' },
                { nimi: 'Frank Ruhl Libre', esimerkki: 'Aa', class: 'Frank Ruhl Libre' },
                { nimi: 'DM Serif Display', esimerkki: 'Aa', class: 'DM Serif Display' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' }
            ],
            moderni: [
                { nimi: 'Inter', esimerkki: 'Aa', class: 'Inter' },
                { nimi: 'Roboto', esimerkki: 'Aa', class: 'Roboto' },
                { nimi: 'Montserrat', esimerkki: 'Aa', class: 'Montserrat' },
                { nimi: 'Raleway', esimerkki: 'Aa', class: 'Raleway' },
                { nimi: 'Poppins', esimerkki: 'Aa', class: 'Poppins' },
                { nimi: 'Work Sans', esimerkki: 'Aa', class: 'Work Sans' },
                { nimi: 'Bebas Neue', esimerkki: 'Aa', class: 'Bebas Neue' },
                { nimi: 'Oswald', esimerkki: 'Aa', class: 'Oswald' },
                { nimi: 'Sora', esimerkki: 'Aa', class: 'Sora' },
                { nimi: 'Manrope', esimerkki: 'Aa', class: 'Manrope' },
                { nimi: 'Outfit', esimerkki: 'Aa', class: 'Outfit' },
                { nimi: 'Plus Jakarta Sans', esimerkki: 'Aa', class: 'Plus Jakarta Sans' }
            ],
            luksus: [
                { nimi: 'Cinzel', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Great Vibes', esimerkki: 'Aa', class: 'Great Vibes' },
                { nimi: 'Abril Fatface', esimerkki: 'Aa', class: 'Abril Fatface' },
                { nimi: 'Yeseva One', esimerkki: 'Aa', class: 'Yeseva One' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Cinzel Decorative', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Cardo', esimerkki: 'Aa', class: 'Cardo' },
                { nimi: 'Old Standard TT', esimerkki: 'Aa', class: 'Old Standard TT' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' }
            ],
            kotoisa: [
                { nimi: 'Merriweather', esimerkki: 'Aa', class: 'Merriweather' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' },
                { nimi: 'Nunito', esimerkki: 'Aa', class: 'Nunito' },
                { nimi: 'Quicksand', esimerkki: 'Aa', class: 'Quicksand' },
                { nimi: 'Source Sans Pro', esimerkki: 'Aa', class: 'Source Sans Pro' },
                { nimi: 'Ubuntu', esimerkki: 'Aa', class: 'Ubuntu' },
                { nimi: 'Josefin Slab', esimerkki: 'Aa', class: 'Josefin Slab' },
                { nimi: 'Zilla Slab', esimerkki: 'Aa', class: 'Zilla Slab' },
                { nimi: 'Karla', esimerkki: 'Aa', class: 'Karla' },
                { nimi: 'Rubik', esimerkki: 'Aa', class: 'Rubik' },
                { nimi: 'Work Sans', esimerkki: 'Aa', class: 'Work Sans' },
                { nimi: 'Manrope', esimerkki: 'Aa', class: 'Manrope' }
            ],
            elegantti: [
                { nimi: 'Great Vibes', esimerkki: 'Aa', class: 'Great Vibes' },
                { nimi: 'Dancing Script', esimerkki: 'Aa', class: 'Dancing Script' },
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Pacifico', esimerkki: 'Aa', class: 'Pacifico' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Yeseva One', esimerkki: 'Aa', class: 'Yeseva One' },
                { nimi: 'Frank Ruhl Libre', esimerkki: 'Aa', class: 'Frank Ruhl Libre' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' },
                { nimi: 'DM Serif Display', esimerkki: 'Aa', class: 'DM Serif Display' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' }
            ],
            creative: [
                { nimi: 'Bebas Neue', esimerkki: 'Aa', class: 'Bebas Neue' },
                { nimi: 'Righteous', esimerkki: 'Aa', class: 'Righteous' },
                { nimi: 'Space Grotesk', esimerkki: 'Aa', class: 'Space Grotesk' },
                { nimi: 'Fredoka', esimerkki: 'Aa', class: 'Fredoka' },
                { nimi: 'Montserrat', esimerkki: 'Aa', class: 'Montserrat' },
                { nimi: 'Poppins', esimerkki: 'Aa', class: 'Poppins' },
                { nimi: 'Rubik', esimerkki: 'Aa', class: 'Rubik' },
                { nimi: 'Josefin Sans', esimerkki: 'Aa', class: 'Josefin Sans' },
                { nimi: 'Syne', esimerkki: 'Aa', class: 'Syne' },
                { nimi: 'Outfit', esimerkki: 'Aa', class: 'Outfit' },
                { nimi: 'Sora', esimerkki: 'Aa', class: 'Sora' },
                { nimi: 'Plus Jakarta Sans', esimerkki: 'Aa', class: 'Plus Jakarta Sans' }
            ]
        };

        const varit = {
            klassinen: [
                { nimi: 'Kerma & Tumma vihre√§', gradient: 'linear-gradient(135deg, #f5f5dc 0%, #1a5f4a 100%)' },
                { nimi: 'Valkoinen & Laivastonsininen', gradient: 'linear-gradient(135deg, #ffffff 0%, #1e3a5f 100%)' },
                { nimi: 'Beige & Ruskea', gradient: 'linear-gradient(135deg, #f4e4c1 0%, #8b6914 100%)' },
                { nimi: 'Harmaa & Musta', gradient: 'linear-gradient(135deg, #e0e0e0 0%, #1a1a1a 100%)' },
                { nimi: 'Kulta & Kerma', gradient: 'linear-gradient(135deg, #ffd700 0%, #f5f5dc 100%)' },
                { nimi: 'Burgundinpunainen & Kulta', gradient: 'linear-gradient(135deg, #800020 0%, #ffd700 100%)' }
            ],
            moderni: [
                { nimi: 'Mustavalkoinen', gradient: 'linear-gradient(135deg, #ffffff 0%, #1a1a1a 100%)' },
                { nimi: 'Harmaas√§vyinen', gradient: 'linear-gradient(135deg, #f5f5f5 0%, #4a4a4a 100%)' },
                { nimi: 'Sininen & Valkoinen', gradient: 'linear-gradient(135deg, #e8f4f8 0%, #1e3a5f 100%)' },
                { nimi: 'Vihre√§ & Valkoinen', gradient: 'linear-gradient(135deg, #f0f9f4 0%, #1a5f4a 100%)' },
                { nimi: 'Oranssi & Harmaa', gradient: 'linear-gradient(135deg, #fff5f0 0%, #ff6b35 100%)' },
                { nimi: 'Liila & Valkoinen', gradient: 'linear-gradient(135deg, #f3e8ff 0%, #7c3aed 100%)' }
            ],
            luksus: [
                { nimi: 'Kulta & Musta', gradient: 'linear-gradient(135deg, #ffd700 0%, #1a1a1a 100%)' },
                { nimi: 'Samppanja & Laivastonsininen', gradient: 'linear-gradient(135deg, #f7e7ce 0%, #1e3a5f 100%)' },
                { nimi: 'Hopea & Tummanharmaa', gradient: 'linear-gradient(135deg, #c0c0c0 0%, #4a4a4a 100%)' },
                { nimi: 'Burgundinpunainen & Kulta', gradient: 'linear-gradient(135deg, #800020 0%, #ffd700 100%)' },
                { nimi: 'Musta & Valkoinen', gradient: 'linear-gradient(135deg, #1a1a1a 0%, #ffffff 100%)' },
                { nimi: 'Emerald & Kulta', gradient: 'linear-gradient(135deg, #50c878 0%, #ffd700 100%)' }
            ],
            kotoisa: [
                { nimi: 'L√§mpim√§ beige', gradient: 'linear-gradient(135deg, #f4e4c1 0%, #d4a574 100%)' },
                { nimi: 'Maanl√§heinen vihre√§', gradient: 'linear-gradient(135deg, #e8f5e9 0%, #2d5016 100%)' },
                { nimi: 'Puu & Ruskea', gradient: 'linear-gradient(135deg, #deb887 0%, #8b4513 100%)' },
                { nimi: 'Terrakotta & Kerma', gradient: 'linear-gradient(135deg, #e2725b 0%, #f5f5dc 100%)' },
                { nimi: 'Sinapinkeltainen & Harmaa', gradient: 'linear-gradient(135deg, #ffdb58 0%, #808080 100%)' },
                { nimi: 'Oliivi & Kerma', gradient: 'linear-gradient(135deg, #808000 0%, #f5f5dc 100%)' }
            ],
            elegantti: [
                { nimi: 'Roosa & Kulta', gradient: 'linear-gradient(135deg, #ffb6c1 0%, #ffd700 100%)' },
                { nimi: 'Laventeli & Valkoinen', gradient: 'linear-gradient(135deg, #e6e6fa 0%, #ffffff 100%)' },
                { nimi: 'Laivastonsininen & Hopea', gradient: 'linear-gradient(135deg, #1e3a5f 0%, #c0c0c0 100%)' },
                { nimi: 'Minttu & Valkoinen', gradient: 'linear-gradient(135deg, #f0fff0 0%, #98ff98 100%)' },
                { nimi: 'Vanha roosa & Harmaa', gradient: 'linear-gradient(135deg, #c08081 0%, #808080 100%)' },
                { nimi: 'Persikka & Kulta', gradient: 'linear-gradient(135deg, #ffdab9 0%, #ffd700 100%)' }
            ],
            creative: [
                { nimi: 'Rohkea punainen & Sininen', gradient: 'linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)' },
                { nimi: 'S√§hk√∂sininen & Keltainen', gradient: 'linear-gradient(135deg, #00d2ff 0%, #ffd700 100%)' },
                { nimi: 'Purppura & Oranssi', gradient: 'linear-gradient(135deg, #9b59b6 0%, #f39c12 100%)' },
                { nimi: 'Turkoosi & Koralli', gradient: 'linear-gradient(135deg, #40e0d0 0%, #ff7f50 100%)' },
                { nimi: 'Neonvihre√§ & Musta', gradient: 'linear-gradient(135deg, #39ff14 0%, #1a1a1a 100%)' },
                { nimi: 'Magenta & Syaani', gradient: 'linear-gradient(135deg, #ff00ff 0%, #00ffff 100%)' }
            ]
        };

        let currentStep = 1;
        let selectedStyle = null;
        let selectedFiles = [];
        let logoFile = null;
        const MAX_FILES = 10;
        let useCustomColors = false;

        // Color picker
        const colorPicker = document.getElementById('colorPicker');
        const hexInput = document.getElementById('hexInput');
        const colorPreview = document.getElementById('colorPreview');
        const colorDisplay = document.getElementById('colorDisplay');
        const customColorValue = document.getElementById('customColorValue');

        function updateColor(color) {
            const secondary = adjustBrightness(color, -30);
            colorPreview.style.background = `linear-gradient(135deg, ${color} 0%, ${secondary} 100%)`;
            colorDisplay.textContent = `${color} ‚Üí ${secondary}`;
            customColorValue.value = `${color},${secondary}`;
            
            const brightness = getBrightness(color);
            const textColor = brightness > 128 ? '#1a1a1a' : '#ffffff';
            const subtextColor = brightness > 128 ? 'rgba(26,26,26,0.7)' : 'rgba(255,255,255,0.8)';
            
            colorPreview.querySelector('.preview-text').style.color = textColor;
            colorPreview.querySelector('.preview-subtext').style.color = subtextColor;
            updateSummary();
        }

        function adjustBrightness(hex, percent) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.max(0, Math.min(255, (num >> 16) + amt));
            const G = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amt));
            const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }

        function getBrightness(hex) {
            const rgb = parseInt(hex.replace('#', ''), 16);
            const r = (rgb >> 16) & 0xff;
            const g = (rgb >> 8) & 0xff;
            const b = (rgb >> 0) & 0xff;
            return 0.2126 * r + 0.7152 * g + 0.0722 * b;
        }

        colorPicker.addEventListener('input', (e) => {
            const color = e.target.value;
            hexInput.value = color.replace('#', '');
            updateColor(color);
        });

        hexInput.addEventListener('input', (e) => {
            let hex = e.target.value.replace(/[^0-9A-F]/gi, '').substring(0, 6);
            e.target.value = hex;
            if (hex.length === 6) {
                const fullHex = '#' + hex;
                colorPicker.value = fullHex;
                updateColor(fullHex);
            }
        });

        function selectStyle(style) {
            selectedStyle = style;
            document.getElementById('tyyliSeuraava').disabled = false;
            updateSummary();
        }

        function generateFonts() {
            if (!selectedStyle) return;
            const grid = document.getElementById('fonttiGrid');
            const f = fontit[selectedStyle];
            document.getElementById('fonttiSubtitle').textContent = `Valitse ${selectedStyle} tyyliin sopiva fontti`;
            
            grid.innerHTML = f.map((font, i) => `
                <label class="option-card" onclick="selectFont('${font.nimi}', this)">
                    <input type="radio" name="valittu_fontti" value="${font.nimi}" required>
                    <div class="font-preview" style="font-family: '${font.class}'">${font.esimerkki}</div>
                    <div class="font-name">${font.nimi}</div>
                </label>
            `).join('');
        }

        function selectFont(name, el) {
            document.getElementById('fonttiSeuraava').disabled = false;
            document.querySelectorAll('#fonttiGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            updateSummary();
        }

        function generateColors() {
            if (!selectedStyle) return;
            const grid = document.getElementById('variGrid');
            const v = varit[selectedStyle];
            document.getElementById('variSubtitle').textContent = `Valitse ${selectedStyle} tyyliin sopiva v√§riteema`;
            
            const customColorsCard = `
                <label class="option-card custom-colors" onclick="selectCustomColors(this)">
                    <input type="radio" name="valittu_variteema" value="Omat v√§rit" id="customColorsRadio">
                    <div class="custom-icon">üé®</div>
                    <div class="color-name">K√§yt√§ omia v√§rej√§</div>
                </label>
            `;
            
            const colorCards = v.map((vari, i) => `
                <label class="option-card" onclick="selectColor('${vari.nimi}', this)">
                    <input type="radio" name="valittu_variteema" value="${vari.nimi}" required>
                    <div class="color-preview" style="background: ${vari.gradient}"></div>
                    <div class="color-name">${vari.nimi}</div>
                </label>
            `).join('');
            
            grid.innerHTML = customColorsCard + colorCards;
        }

        function selectCustomColors(el) {
            useCustomColors = true;
            document.getElementById('variSeuraava').disabled = false;
            document.querySelectorAll('#variGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            document.getElementById('customColorSection').classList.add('visible');
            updateSummary();
        }

        function selectColor(name, el) {
            useCustomColors = false;
            document.getElementById('variSeuraava').disabled = false;
            document.querySelectorAll('#variGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            document.getElementById('customColorSection').classList.remove('visible');
            document.getElementById('customColorValue').value = '';
            updateSummary();
        }

        function updateSummary() {
            const tyyli = document.querySelector('input[name="valittu_tyyli"]:checked');
            const fontti = document.querySelector('input[name="valittu_fontti"]:checked');
            const vari = document.querySelector('input[name="valittu_variteema"]:checked');
            const hex = document.getElementById('customColorValue').value;
            
            if (tyyli) document.getElementById('summaryTyyli').textContent = tyyli.value;
            if (fontti) document.getElementById('summaryFontti').textContent = fontti.value;
            if (vari) document.getElementById('summaryVari').textContent = vari.value;
            
            if (hex && useCustomColors) {
                document.getElementById('summaryHexRow').classList.remove('hidden');
                document.getElementById('summaryHex').textContent = hex.split(',')[0];
            } else {
                document.getElementById('summaryHexRow').classList.add('hidden');
            }
        }

        function updateProgress() {
            document.querySelectorAll('.progress-step').forEach((step, idx) => {
                step.classList.remove('active', 'completed');
                if (idx + 1 < currentStep) step.classList.add('completed');
                else if (idx + 1 === currentStep) step.classList.add('active');
            });
            document.getElementById('progressBar').setAttribute('aria-valuenow', currentStep);
        }

        function showStep(step) {
            document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
            document.querySelector(`[data-section="${step}"]`).classList.add('active');
            currentStep = step;
            updateProgress();
            window.scrollTo(0, 0);
        }

        function nextStep() {
            const section = document.querySelector(`[data-section="${currentStep}"]`);
            const required = section.querySelectorAll('[required]');
            let valid = true;

            required.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('error');
                    valid = false;
                } else {
                    field.classList.remove('error');
                }
            });

            if (!valid) return;

            if (currentStep === 2) generateFonts();
            if (currentStep === 3) generateColors();
            
            if (currentStep < 5) showStep(currentStep + 1);
        }

        function prevStep() {
            if (currentStep > 1) showStep(currentStep - 1);
        }

        function goToStep(step) {
            showStep(step);
        }

        // KUVANK√ÑSITTELY JA PAKKAUS

        // Pakkaa kuva canvasin kautta
        async function compressImage(file, maxWidth = 1200, maxHeight = 1200, quality = 0.7) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        // S√§ilyt√§ mittasuhteet
                        if (width > height) {
                            if (width > maxWidth) {
                                height *= maxWidth / width;
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width *= maxHeight / height;
                                height = maxHeight;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Muunna blobiksi
                        canvas.toBlob((blob) => {
                            if (blob) {
                                // Luo uusi tiedosto
                                const compressedFile = new File([blob], file.name, {
                                    type: 'image/jpeg',
                                    lastModified: Date.now()
                                });
                                resolve({
                                    file: compressedFile,
                                    originalSize: file.size,
                                    compressedSize: blob.size,
                                    reduction: ((file.size - blob.size) / file.size * 100).toFixed(1)
                                });
                            } else {
                                reject(new Error('Pakkaus ep√§onnistui'));
                            }
                        }, 'image/jpeg', quality);
                    };
                    img.onerror = reject;
                    img.src = event.target.result;
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // Logo handling
        async function handleLogo(file) {
            const errorDiv = document.getElementById('logoError');
            const infoDiv = document.getElementById('logoCompressionInfo');
            errorDiv.textContent = '';
            errorDiv.classList.remove('show');
            infoDiv.classList.remove('visible');
            
            if (!file.type.startsWith('image/')) {
                showLogoError('Valitse kuvatiedosto (SVG, PNG, JPEG)');
                return;
            }
            
            try {
                // Pakkaa logo
                const compressed = await compressImage(file, 800, 800, 0.8);
                logoFile = compressed.file;
                
                // N√§yt√§ pakkaustiedot
                infoDiv.textContent = `Pakattu: ${(compressed.originalSize / 1024 / 1024).toFixed(2)}MB ‚Üí ${(compressed.compressedSize / 1024).toFixed(0)}KB (${compressed.reduction}% pienempi)`;
                infoDiv.classList.add('visible');
                
                updateLogoPreview();
            } catch (error) {
                console.error('Virhe logon pakkaamisessa:', error);
                // Jos pakkaus ep√§onnistuu, k√§yt√§ alkuper√§ist√§
                logoFile = file;
                updateLogoPreview();
            }
        }

        function showLogoError(msg) {
            const errorDiv = document.getElementById('logoError');
            errorDiv.textContent = msg;
            errorDiv.classList.add('show');
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }

        function updateLogoPreview() {
            const container = document.getElementById('logoPreviewContainer');
            const grid = document.getElementById('logoPreviewGrid');
            
            container.classList.add('has-images');
            const url = URL.createObjectURL(logoFile);
            grid.innerHTML = `
                <div class="image-preview-item">
                    <img src="${url}" alt="${logoFile.name}">
                    <button type="button" class="image-remove-btn" onclick="clearLogo()">√ó</button>
                    <div class="image-file-name" title="${logoFile.name}">${logoFile.name}</div>
                </div>
            `;
        }

        function clearLogo() {
            logoFile = null;
            document.getElementById('logoPreviewContainer').classList.remove('has-images');
            document.getElementById('logoPreviewGrid').innerHTML = '';
            document.getElementById('logoCompressionInfo').classList.remove('visible');
            document.getElementById('logoInput').value = '';
        }

        // Logo event listeners
        const logoDropZone = document.getElementById('logoDropZone');
        ['dragenter', 'dragover'].forEach(e => {
            logoDropZone.addEventListener(e, ev => {
                ev.preventDefault();
                logoDropZone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(e => {
            logoDropZone.addEventListener(e, ev => {
                ev.preventDefault();
                logoDropZone.classList.remove('dragover');
            });
        });
        logoDropZone.addEventListener('drop', e => {
            if (e.dataTransfer.files.length > 0) {
                handleLogo(e.dataTransfer.files[0]);
            }
        });
        document.getElementById('logoInput').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                handleLogo(e.target.files[0]);
            }
        });

        // General images handling
        async function handleFiles(files) {
            const errorDiv = document.getElementById('uploadError');
            const infoDiv = document.getElementById('compressionInfo');
            errorDiv.textContent = '';
            errorDiv.classList.remove('show');
            
            const newFiles = Array.from(files).filter(f => f.type.startsWith('image/'));
            if (newFiles.length === 0) {
                showUploadError('Valitse vain kuvatiedostoja');
                return;
            }
            
            if (selectedFiles.length + newFiles.length > MAX_FILES) {
                const remaining = MAX_FILES - selectedFiles.length;
                if (remaining <= 0) {
                    showUploadError(`Voit lis√§t√§ enint√§√§n ${MAX_FILES} kuvaa`);
                    return;
                }
                showUploadError(`Lis√§ttiin ${Math.min(newFiles.length, remaining)} kuvaa. Raja t√§ynn√§.`);
            }
            
            const remaining = MAX_FILES - selectedFiles.length;
            const filesToProcess = newFiles.slice(0, remaining);
            
            // Pakkaa kaikki kuvat
            const compressionResults = [];
            for (const file of filesToProcess) {
                try {
                    const compressed = await compressImage(file, 1200, 1200, 0.7);
                    selectedFiles.push(compressed.file);
                    compressionResults.push(compressed);
                } catch (error) {
                    console.error('Virhe kuvan pakkaamisessa:', error);
                    selectedFiles.push(file);
                }
            }
            
            // N√§yt√§ pakkaustiedot
            if (compressionResults.length > 0) {
                const totalOriginal = compressionResults.reduce((sum, r) => sum + r.originalSize, 0);
                const totalCompressed = compressionResults.reduce((sum, r) => sum + r.compressedSize, 0);
                const avgReduction = ((totalOriginal - totalCompressed) / totalOriginal * 100).toFixed(1);
                infoDiv.textContent = `Pakattu ${compressionResults.length} kuvaa: yhteens√§ ${(totalOriginal / 1024 / 1024).toFixed(2)}MB ‚Üí ${(totalCompressed / 1024).toFixed(0)}KB (${avgReduction}% pienempi)`;
                infoDiv.classList.add('visible');
            }
            
            updatePreview();
            updateUpload();
        }

        function showUploadError(msg) {
            const errorDiv = document.getElementById('uploadError');
            errorDiv.textContent = msg;
            errorDiv.classList.add('show');
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }

        function updatePreview() {
            const container = document.getElementById('imagePreviewContainer');
            const grid = document.getElementById('imagePreviewGrid');
            const count = document.getElementById('previewCount');
            
            count.textContent = `Valittuja kuvia: ${selectedFiles.length} / ${MAX_FILES}`;
            count.classList.toggle('max', selectedFiles.length >= MAX_FILES);
            container.classList.toggle('has-images', selectedFiles.length > 0);
            
            grid.innerHTML = selectedFiles.map((file, i) => {
                const url = URL.createObjectURL(file);
                return `
                    <div class="image-preview-item">
                        <img src="${url}" alt="${file.name}">
                        <button type="button" class="image-remove-btn" onclick="removeImage(${i})">√ó</button>
                        <div class="image-file-name" title="${file.name}">${file.name}</div>
                    </div>
                `;
            }).join('');
        }

        function updateUpload() {
            const zone = document.getElementById('dropZone');
            const input = document.getElementById('fileInput');
            if (selectedFiles.length >= MAX_FILES) {
                zone.classList.add('disabled');
                input.disabled = true;
            } else {
                zone.classList.remove('disabled');
                input.disabled = false;
            }
        }

        function removeImage(i) {
            selectedFiles.splice(i, 1);
            updatePreview();
            updateUpload();
        }

        function clearAllImages() {
            selectedFiles = [];
            document.getElementById('compressionInfo').classList.remove('visible');
            updatePreview();
            updateUpload();
        }

        // General images event listeners
        const dropZone = document.getElementById('dropZone');
        ['dragenter', 'dragover'].forEach(e => {
            dropZone.addEventListener(e, ev => {
                ev.preventDefault();
                if (selectedFiles.length < MAX_FILES) dropZone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(e => {
            dropZone.addEventListener(e, ev => {
                ev.preventDefault();
                dropZone.classList.remove('dragover');
            });
        });
        dropZone.addEventListener('drop', e => {
            if (selectedFiles.length < MAX_FILES) handleFiles(e.dataTransfer.files);
        });
        document.getElementById('fileInput').addEventListener('change', function(e) {
            handleFiles(e.target.files);
        });

        // Form submission - korvaa tiedostot pakatuilla
        document.getElementById('tilausForm').addEventListener('submit', function(e) {
            // Validoi step 5:n pakolliset kent√§t
            const palvelut = document.getElementById('palvelut');
            const paketti = document.getElementById('paketti');
            let valid = true;

            if (!palvelut.value.trim()) {
                palvelut.classList.add('error');
                palvelut.focus();
                valid = false;
            } else {
                palvelut.classList.remove('error');
            }

            if (!paketti.value) {
                paketti.classList.add('error');
                if (valid) paketti.focus();
                valid = false;
            } else {
                paketti.classList.remove('error');
            }

            if (!valid) {
                e.preventDefault();
                return;
            }

            document.getElementById('loadingOverlay').classList.add('show');
            document.getElementById('submitBtn').disabled = true;

            // Korvaa logo pakatulla versiolla
            if (logoFile) {
                const logoInput = document.getElementById('logoInput');
                const dt = new DataTransfer();
                dt.items.add(logoFile);
                logoInput.files = dt.files;
            }
            
            // Korvaa kuvat pakatuilla versioilla
            if (selectedFiles.length > 0) {
                const fileInput = document.getElementById('fileInput');
                const dt = new DataTransfer();
                selectedFiles.forEach(file => dt.items.add(file));
                fileInput.files = dt.files;
            }
            
            document.getElementById('loadingText').textContent = 'L√§hetet√§√§n tilausta...';
        });

        // Hinnasto ‚Äì vaihda teksti/tiedosto
        function switchHinnasto(mode) {
            const tabs = document.querySelectorAll('.hinnasto-tab');
            const textSection = document.getElementById('hinnastoTextSection');
            const fileSection = document.getElementById('hinnastoFileSection');
            if (mode === 'text') {
                tabs[0].classList.add('active');
                tabs[1].classList.remove('active');
                textSection.classList.remove('hidden');
                fileSection.classList.add('hidden');
                document.getElementById('hinnastoFileInput').value = '';
                document.getElementById('hinnastoFileInfo').classList.remove('show');
            } else {
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
                textSection.classList.add('hidden');
                fileSection.classList.remove('hidden');
                document.getElementById('hinnasto').value = '';
            }
        }

        document.getElementById('hinnastoFileInput').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                document.getElementById('hinnastoFileName').textContent = e.target.files[0].name;
                document.getElementById('hinnastoFileInfo').classList.add('show');
            }
        });

        function clearHinnastoFile() {
            document.getElementById('hinnastoFileInput').value = '';
            document.getElementById('hinnastoFileInfo').classList.remove('show');
        }

        // Drag & drop hinnasto
        const hinnastoDropZone = document.getElementById('hinnastoDropZone');
        ['dragenter', 'dragover'].forEach(ev => {
            hinnastoDropZone.addEventListener(ev, e => { e.preventDefault(); hinnastoDropZone.classList.add('dragover'); });
        });
        ['dragleave', 'drop'].forEach(ev => {
            hinnastoDropZone.addEventListener(ev, e => { hinnastoDropZone.classList.remove('dragover'); });
        });
        hinnastoDropZone.addEventListener('drop', e => {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const dt = new DataTransfer();
                dt.items.add(files[0]);
                document.getElementById('hinnastoFileInput').files = dt.files;
                document.getElementById('hinnastoFileName').textContent = files[0].name;
                document.getElementById('hinnastoFileInfo').classList.add('show');
            }
        });

        // Real-time validation
        document.querySelectorAll('input, textarea, select').forEach(field => {
            field.addEventListener('input', function() {
                if (this.value.trim()) this.classList.remove('error');
            });
        });

        // Initialize
        updateColor('#1a5f4a');
    </script>
</body>
</html>
