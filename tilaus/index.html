
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tilaus | Verkkokumppani</title>
    <meta name="robots" content="noindex, nofollow">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Cormorant+Garamond:wght@300;400;500;600;700&family=Libre+Baskerville:wght@400;700&family=Roboto:wght@300;400;500&family=Montserrat:wght@300;400;500;600;700;800&family=Cinzel:wght@400;500;600;700&family=Merriweather:wght@300;400;700&family=Lora:wght@400;500;600&family=Great+Vibes&family=Bebas+Neue&family=Raleway:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600&family=Ubuntu:wght@300;400;500;700&family=Nunito:wght@300;400;600;700;800&family=Rubik:wght@300;400;500;600;700&family=Work+Sans:wght@300;400;500;600;700&family=Quicksand:wght@300;400;500;600;700&family=Karla:wght@300;400;500;600;700&family=Josefin+Sans:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Abril+Fatface&family=Righteous&family=Fredoka:wght@300;400;500;600&family=Prata&family=Cormorant:wght@300;400;500;600;700&family=Old+Standard+TT:wght@400;700&family=Cardo:wght@400;700&family=Frank+Ruhl+Libre:wght@300;400;500;700&family=DM+Serif+Display&family=Yeseva+One&family=Josefin+Slab:wght@300;400;500;600;700&family=Zilla+Slab:wght@300;400;500;600;700&family=Sora:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700;800&family=Syne:wght@400;500;600;700;800&family=Outfit:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Satoshi:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5f4a;
            --primary-dark: #0f3d2e;
            --text: #1a1a1a;
            --text-light: #4a4a4a;
            --bg: #fafafa;
            --bg-warm: #f5f3f0;
            --border: #e0ddd8;
            --error: #dc2626;
            --success: #16a34a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text);
            line-height: 1.6;
            background: var(--bg-warm);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .header {
            background: var(--primary);
            color: white;
            padding: 3rem 2.5rem;
            text-align: center;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .header p { opacity: 0.9; font-weight: 300; }

        .form-container { padding: 2.5rem; }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border);
            z-index: 0;
        }

        .progress-step {
            position: relative;
            z-index: 1;
            background: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s;
        }

        .progress-step.active { border-color: var(--primary); color: var(--primary); }
        .progress-step.completed { background: var(--primary); border-color: var(--primary); color: white; }

        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.4s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            color: var(--text);
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            color: var(--text-light);
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .form-group { margin-bottom: 1.5rem; }

        label {
            display: block;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .required { color: var(--primary); }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="color"],
        textarea,
        select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .hint {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.375rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .style-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .style-option { 
            position: relative; 
            cursor: pointer; 
        }

        .style-option input { position: absolute; opacity: 0; }

        .style-card.klassinen {
            border: 2px solid #d4c5b0;
            border-radius: 4px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #faf8f5 0%, #f0ebe3 100%);
            font-family: 'Playfair Display', serif;
        }

        .style-card.klassinen .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b7355 0%, #5c4a3d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #f5f5dc;
            border: 3px solid #d4c5b0;
        }

        .style-card.klassinen .style-name {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            color: #3d3229;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .style-card.klassinen .style-desc {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #6b5d4d;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.klassinen {
            border-color: #8b7355;
            box-shadow: 0 8px 30px rgba(139, 115, 85, 0.25);
            transform: translateY(-4px);
        }

        .style-card.moderni {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            font-family: 'Inter', sans-serif;
        }

        .style-card.moderni .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 16px;
            background: linear-gradient(135deg, #1a1a1a 0%, #4a4a4a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }

        .style-card.moderni .style-name {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .style-card.moderni .style-desc {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.moderni {
            border-color: #1a1a1a;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            transform: translateY(-4px);
        }

        .style-card.luksus {
            border: 2px solid #d4af37;
            border-radius: 8px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            font-family: 'Cinzel', serif;
        }

        .style-card.luksus .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700 0%, #d4af37 50%, #b8860b 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #0a0a0a;
            border: 3px solid #d4af37;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        .style-card.luksus .style-name {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #ffd700;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .style-card.luksus .style-desc {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #c0c0c0;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.luksus {
            border-color: #ffd700;
            box-shadow: 0 8px 40px rgba(212, 175, 55, 0.4);
            transform: translateY(-4px);
        }

        .style-card.kotoisa {
            border: 2px solid #d4a574;
            border-radius: 20px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #faf4ed 0%, #f0e6d8 100%);
            font-family: 'Merriweather', serif;
        }

        .style-card.kotoisa .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b4513 0%, #d4a574 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #faf4ed;
            border: 3px solid #d4a574;
        }

        .style-card.kotoisa .style-name {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            color: #5d3a1a;
            font-weight: 600;
        }

        .style-card.kotoisa .style-desc {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #7a5c3c;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.kotoisa {
            border-color: #8b4513;
            box-shadow: 0 8px 30px rgba(139, 69, 19, 0.2);
            transform: translateY(-4px);
        }

        .style-card.elegantti {
            border: 2px solid #e8d5d5;
            border-radius: 30px 30px 30px 4px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe0e0 100%);
            font-family: 'Great Vibes', cursive;
        }

        .style-card.elegantti .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffb6c1 0%, #ff69b4 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            border: 3px solid #ffd700;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.4);
        }

        .style-card.elegantti .style-name {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: #c71585;
            font-weight: normal;
        }

        .style-card.elegantti .style-desc {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #8b5a6b;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.elegantti {
            border-color: #ff69b4;
            box-shadow: 0 8px 30px rgba(255, 105, 180, 0.3);
            transform: translateY(-4px);
        }

        .style-card.creative {
            border: 3px solid transparent;
            border-radius: 12px;
            padding: 2rem 1.5rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            font-family: 'Bebas Neue', sans-serif;
            position: relative;
        }

        .style-card.creative::before {
            content: '';
            position: absolute;
            top: -3px; left: -3px; right: -3px; bottom: -3px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #ffe66d, #ff6b6b);
            border-radius: 14px;
            z-index: -1;
        }

        .style-card.creative .style-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1.5rem;
            border-radius: 12px;
            background: linear-gradient(45deg, #ff6b6b 0%, #4ecdc4 50%, #ffe66d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            transform: rotate(-5deg);
        }

        .style-card.creative .style-name {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
            font-weight: normal;
            letter-spacing: 3px;
        }

        .style-card.creative .style-desc {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #444;
            line-height: 1.5;
        }

        .style-option input:checked + .style-card.creative {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .option-card {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .option-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .option-card.selected {
            border-color: var(--primary);
            background: var(--bg-warm);
            box-shadow: 0 4px 12px rgba(26, 95, 74, 0.15);
        }

        .option-card input {
            position: absolute;
            opacity: 0;
        }

        .font-preview {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .font-name {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .color-preview {
            height: 60px;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .color-name {
            font-weight: 500;
            font-size: 0.95rem;
        }

        .option-card.custom-colors {
            border: 2px dashed var(--primary);
            background: linear-gradient(135deg, #f0f9f4 0%, #e8f5e9 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
        }

        .option-card.custom-colors:hover {
            background: linear-gradient(135deg, #e8f5e9 0%, #d0e8d4 100%);
        }

        .option-card.custom-colors .custom-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .option-card.custom-colors .color-name {
            color: var(--primary);
            font-weight: 600;
        }

        .custom-color-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--bg);
            border-radius: 8px;
            border: 2px solid var(--border);
        }

        .custom-color-header {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .color-picker-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            align-items: start;
        }

        .picker-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .color-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .color-input-group label {
            font-size: 0.875rem;
            margin-bottom: 0;
        }

        input[type="color"] {
            width: 100%;
            height: 50px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            background: white;
            padding: 4px;
        }

        .hex-input-wrapper {
            position: relative;
        }

        .hex-prefix {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-weight: 600;
            font-size: 1rem;
        }

        input[type="text"].hex-input {
            padding-left: 2.5rem;
            font-family: 'Monaco', 'Consolas', monospace;
            text-transform: uppercase;
        }

        .color-preview-box {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid var(--border);
            text-align: center;
        }

        .preview-title {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .preview-sample {
            padding: 2rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .preview-text {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .preview-subtext {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        .selected-color-display {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.875rem;
            color: var(--text);
            font-weight: 600;
        }

        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 3rem 2rem;
            text-align: center;
            transition: all 0.3s;
            background: var(--bg);
            cursor: pointer;
            position: relative;
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: var(--bg-warm);
        }

        .file-upload-area.dragover {
            border-color: var(--primary);
            background: var(--bg-warm);
            transform: scale(1.02);
        }

        .file-upload-area.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .file-upload-area input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-area.disabled input[type="file"] {
            cursor: not-allowed;
        }

        .upload-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }

        .upload-text strong {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
            color: var(--primary);
        }

        .upload-text span {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .upload-limit {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: var(--bg-warm);
            border-radius: 4px;
            display: inline-block;
        }

        .upload-alternative {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .upload-alternative a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .upload-alternative a:hover {
            text-decoration: underline;
        }

        .logo-upload-area {
            border: 2px dashed #667eea;
            border-radius: 12px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: all 0.3s;
            background: linear-gradient(135deg, #f0f4ff 0%, #e8edff 100%);
            cursor: pointer;
            position: relative;
            margin-bottom: 1.5rem;
        }

        .logo-upload-area:hover {
            border-color: #764ba2;
            background: linear-gradient(135deg, #e8edff 0%, #dde3ff 100%);
        }

        .logo-upload-area.dragover {
            border-color: #764ba2;
            transform: scale(1.02);
        }

        .logo-upload-area input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .logo-icon { 
            font-size: 2.5rem; 
            margin-bottom: 0.75rem; 
            color: #667eea;
        }

        .logo-text strong {
            display: block;
            font-size: 1rem;
            margin-bottom: 0.25rem;
            color: #667eea;
        }

        .logo-text span {
            color: var(--text-light);
            font-size: 0.875rem;
        }

        .logo-hint {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 0.5rem;
        }

        .image-preview-container {
            margin-top: 1.5rem;
            display: none;
        }

        .image-preview-container.has-images { display: block; }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .preview-count {
            font-weight: 500;
            color: var(--text);
        }

        .preview-count.max {
            color: var(--primary);
            font-weight: 600;
        }

        .clear-all-btn {
            background: transparent;
            color: var(--error);
            border: 1px solid var(--error);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-all-btn:hover {
            background: var(--error);
            color: white;
        }

        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
        }

        .image-preview-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        .image-preview-item:hover {
            border-color: var(--primary);
        }

        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-remove-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            background: rgba(220, 38, 38, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            opacity: 0;
            transition: opacity 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-preview-item:hover .image-remove-btn { opacity: 1; }

        .image-file-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            font-size: 0.7rem;
            padding: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .compression-info {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #e8f5e9;
            border-radius: 4px;
            border-left: 3px solid var(--success);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .btn {
            padding: 0.875rem 2rem;
            border-radius: 4px;
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-family: inherit;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover { background: var(--bg); }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) { background: var(--primary-dark); }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-text {
            background: transparent;
            color: var(--primary);
            text-decoration: underline;
            padding: 0.5rem;
        }

        .summary-box {
            background: var(--bg-warm);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
        }

        .summary-item:last-child { border-bottom: none; }

        .change-link {
            color: var(--primary);
            cursor: pointer;
            font-size: 0.85rem;
            text-decoration: underline;
        }

        .change-link:hover {
            color: var(--primary-dark);
        }

        .error-message {
            color: var(--error);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: none;
            padding: 0.5rem;
            background: #fef2f2;
            border-radius: 4px;
            border-left: 3px solid var(--error);
        }

        .error-message.show { display: block; }

        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loading-overlay.show {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            body { padding: 1rem; }
            .header { padding: 2rem 1.5rem; }
            .form-container { padding: 1.5rem; }
            .style-grid { grid-template-columns: repeat(2, 1fr); }
            .option-grid { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; }
            .button-group { flex-direction: column-reverse; gap: 1rem; }
            .btn { width: 100%; }
            .image-preview-grid { grid-template-columns: repeat(3, 1fr); }
            .color-picker-wrapper { grid-template-columns: 1fr; }
        }

        /* Hinnasto tabs */
        .hinnasto-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        .hinnasto-tab {
            padding: 0.45rem 1.1rem;
            border: 1.5px solid var(--border);
            border-radius: 6px;
            background: white;
            cursor: pointer;
            font-size: 0.88rem;
            color: var(--text-light);
            transition: all 0.2s;
        }
        .hinnasto-tab.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }
        .hinnasto-upload-area {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
            background: var(--bg);
        }
        .hinnasto-upload-area:hover { border-color: var(--primary); background: var(--bg-warm); }
        .hinnasto-upload-area.dragover { border-color: var(--primary); background: var(--bg-warm); transform: scale(1.01); }
        .hinnasto-upload-area input[type="file"] {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0; cursor: pointer;
        }
        .hinnasto-file-info {
            display: none;
            align-items: center;
            gap: 0.75rem;
            padding: 0.7rem 1rem;
            background: #f0f7f4;
            border: 1.5px solid var(--primary);
            border-radius: 8px;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }
        .hinnasto-file-info.show { display: flex; }
        .hinnasto-file-info .remove-btn {
            margin-left: auto; background: none; border: none;
            cursor: pointer; color: var(--error); font-size: 1rem;
        }
    </style>
</head>
<body>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingText">Pakataan kuvia...</p>
    </div>

    <div class="container">
        <div class="header">
            <h1>Verkkosivujen tilaus</h1>
            <p>Valitse oma polkusi ja r√§√§t√§l√∂i sivustosi</p>
        </div>

        <div class="form-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress-step active" data-step="1">1</div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-step" data-step="4">4</div>
                <div class="progress-step" data-step="5">5</div>
            </div>

            <form action="https://formspree.io/f/xvzbgpoz" method="POST" enctype="multipart/form-data" id="tilausForm">
                <input type="hidden" name="_subject" value="Uusi verkkosivutilaus - Verkkokumppani">
                <input type="text" name="_gotcha" style="display:none">
                
                <!-- STEP 1 -->
                <div class="section active" data-section="1">
                    <h2 class="section-title">Perustiedot</h2>
                    <p class="section-subtitle">Kerro meille yrityksest√§si</p>
                    
                    <div class="form-group">
                        <label for="yritysnimi">Yrityksen nimi <span class="required">*</span></label>
                        <input type="text" name="yritysnimi" id="yritysnimi" required placeholder="Esimerkki Oy">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ytunnus">Y-tunnus</label>
                            <input type="text" name="ytunnus" id="ytunnus" placeholder="1234567-8">
                            <div class="hint">Muoto: 1234567-8</div>
                        </div>
                        <div class="form-group">
                            <label for="toimiala">Toimiala <span class="required">*</span></label>
                            <select name="toimiala" id="toimiala" required>
                                <option value="">Valitse...</option>
                                <option value="kampaamo">Kampaamo / Parturi</option>
                                <option value="kauneushoitola">Kauneushoitola</option>
                                <option value="kynsiteknikko">Kynsiteknikko</option>
                                <option value="hieroja">Hieroja / Fysioterapeutti</option>
                                <option value="pt">Personal Trainer</option>
                                <option value="muu">Muu palveluala</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="osoite">Osoite <span class="required">*</span></label>
                        <input type="text" name="osoite" id="osoite" required placeholder="Katuosoite, postinumero Kaupunki">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="puhelin">Puhelin <span class="required">*</span></label>
                            <input type="tel" name="puhelin" id="puhelin" required placeholder="040 123 4567">
                        </div>
                        <div class="form-group">
                            <label for="email">S√§hk√∂posti <span class="required">*</span></label>
                            <input type="email" name="email" id="email" required placeholder="sahkoposti@yritys.fi">
                        </div>
                    </div>

                    <div class="button-group">
                        <div></div>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Seuraava ‚Üí</button>
                    </div>
                </div>

                <!-- STEP 2: Tyyli -->
                <div class="section" data-section="2">
                    <h2 class="section-title">Valitse tyyli</h2>
                    <p class="section-subtitle">Millaisen ilmeen haluat sivuillesi?</p>
                    
                    <div class="style-grid">
                        <label class="style-option" onclick="selectStyle('klassinen')">
                            <input type="radio" name="valittu_tyyli" value="Klassinen" required>
                            <div class="style-card klassinen">
                                <div class="style-icon">K</div>
                                <div class="style-name">Klassinen</div>
                                <div class="style-desc">Ajaton elegance ja perinteinen tyyli. Sopii yrityksille, jotka haluavat luotettavan ja arvokkaan imagon.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('moderni')">
                            <input type="radio" name="valittu_tyyli" value="Moderni">
                            <div class="style-card moderni">
                                <div class="style-icon">M</div>
                                <div class="style-name">Moderni</div>
                                <div class="style-desc">Puhtaat linjat ja minimalistinen design. T√§ydellinen nykyaikaisille yrityksille, jotka arvostavat selkeytt√§.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('luksus')">
                            <input type="radio" name="valittu_tyyli" value="Luksus">
                            <div class="style-card luksus">
                                <div class="style-icon">L</div>
                                <div class="style-name">Luksus</div>
                                <div class="style-desc">Kultaa, mustaa ja premium-tunnelmaa. Korosta laatua ja eksklusiivisuutta t√§m√§n tyylikk√§√§n ilmeen avulla.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('kotoisa')">
                            <input type="radio" name="valittu_tyyli" value="Kotoisa">
                            <div class="style-card kotoisa">
                                <div class="style-icon">O</div>
                                <div class="style-name">Kotoisa</div>
                                <div class="style-desc">L√§mpimi√§ s√§vyj√§ ja kutsuva tunnelma. Ihanteellinen yrityksille, jotka haluavat v√§litt√§√§ l√§heisyytt√§ ja mukavuutta.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('elegantti')">
                            <input type="radio" name="valittu_tyyli" value="Elegantti">
                            <div class="style-card elegantti">
                                <div class="style-icon">E</div>
                                <div class="style-name">Elegantti</div>
                                <div class="style-desc">Hienostunutta kauneutta ja naisellista charmia. Roosaa, kultaa ja pehmeit√§ muotoja.</div>
                            </div>
                        </label>

                        <label class="style-option" onclick="selectStyle('creative')">
                            <input type="radio" name="valittu_tyyli" value="Luova">
                            <div class="style-card creative">
                                <div class="style-icon">L</div>
                                <div class="style-name">Luova</div>
                                <div class="style-desc">Rohkeita v√§rej√§ ja erottuva ilme. Valitse t√§m√§, jos haluat erottua joukosta ja n√§ytt√§√§ persoonallisuutesi.</div>
                            </div>
                        </label>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()" id="tyyliSeuraava" disabled>Seuraava ‚Üí</button>
                    </div>
                </div>

                <!-- STEP 3: Fontti -->
                <div class="section" data-section="3">
                    <h2 class="section-title">Valitse fontti</h2>
                    <p class="section-subtitle" id="fonttiSubtitle">Valitse tyyli ensin</p>
                    
                    <div class="option-grid" id="fonttiGrid"></div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div>
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()" id="fonttiSeuraava" disabled>Seuraava ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- STEP 4: V√§rit -->
                <div class="section" data-section="4">
                    <h2 class="section-title">Valitse v√§riteema</h2>
                    <p class="section-subtitle" id="variSubtitle">Valitse tyyli ensin</p>
                    
                    <div class="option-grid" id="variGrid"></div>

                    <div class="custom-color-section" id="customColorSection" style="display: none;">
                        <div class="custom-color-header">üé® M√§√§rit√§ omat v√§risi</div>
                        <div class="color-picker-wrapper">
                            <div class="picker-area">
                                <div class="color-input-group">
                                    <label>Valitse p√§√§v√§ri</label>
                                    <input type="color" id="colorPicker" value="#1a5f4a">
                                </div>
                                <div class="color-input-group">
                                    <label>tai sy√∂t√§ HEX-koodi</label>
                                    <div class="hex-input-wrapper">
                                        <span class="hex-prefix">#</span>
                                        <input type="text" class="hex-input" id="hexInput" placeholder="1a5f4a" maxlength="6">
                                    </div>
                                </div>
                            </div>
                            <div class="color-preview-box">
                                <div class="preview-title">Esikatselu</div>
                                <div class="preview-sample" id="colorPreview">
                                    <div class="preview-text">Yrityksesi nimi</div>
                                    <div class="preview-subtext">Esimerkkiteksti</div>
                                </div>
                                <div class="selected-color-display" id="colorDisplay">#1a5f4a ‚Üí #0f3d2e</div>
                            </div>
                        </div>
                        <input type="hidden" name="oma_hex_vari" id="customColorValue">
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div>
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="button" class="btn btn-primary" onclick="nextStep()" id="variSeuraava" disabled>Seuraava ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- STEP 5: Sis√§lt√∂ -->
                <div class="section" data-section="5">
                    <h2 class="section-title">Sis√§lt√∂ ja kuvat</h2>
                    <p class="section-subtitle">Kerro palveluistasi ja lis√§√§ kuvia</p>
                    
                    <div class="form-group">
                        <label for="palvelut">Palvelut <span class="required">*</span></label>
                        <textarea name="palvelut" id="palvelut" required placeholder="Kuvaile mit√§ palveluita tarjoat..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Hinnasto</label>
                        <div class="hinnasto-tabs">
                            <button type="button" class="hinnasto-tab active" onclick="switchHinnasto('text')">Kirjoita itse</button>
                            <button type="button" class="hinnasto-tab" onclick="switchHinnasto('file')">Lataa tiedosto</button>
                        </div>
                        <div id="hinnastoTextSection">
                            <textarea name="hinnasto" id="hinnasto" placeholder="Palvelut ja hinnat..."></textarea>
                        </div>
                        <div id="hinnastoFileSection" style="display:none;">
                            <div class="hinnasto-upload-area" id="hinnastoDropZone">
                                <input type="file" name="hinnasto_tiedosto" id="hinnastoFileInput"
                                    accept=".pdf,.doc,.docx,.txt,.xls,.xlsx,.odt,.ods,.rtf,.csv">
                                <div class="upload-icon">üìÑ</div>
                                <div class="upload-text">
                                    <strong>Raahaa tiedosto t√§h√§n</strong>
                                    <span>tai klikkaa valitaksesi</span>
                                </div>
                                <div class="upload-limit">PDF, Word (.doc/.docx), Excel, TXT, RTF...</div>
                            </div>
                            <div class="hinnasto-file-info" id="hinnastoFileInfo">
                                <span>üìÑ</span>
                                <span id="hinnastoFileName"></span>
                                <button type="button" class="remove-btn" onclick="clearHinnastoFile()">‚úï Poista</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="aukiolo">Avoinnaoloajat</label>
                            <input type="text" name="aukiolo" id="aukiolo" placeholder="Ma-pe 9-17">
                        </div>
                        <div class="form-group">
                            <label for="instagram">Instagram</label>
                            <input type="text" name="instagram" id="instagram" placeholder="@yritys">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="facebook">Facebook</label>
                        <input type="text" name="facebook" id="facebook" placeholder="Yrityksen nimi">
                    </div>

                    <!-- Logo -->
                    <div class="form-group">
                        <label>Lis√§√§ logo (valinnainen)</label>
                        <div class="logo-upload-area" id="logoDropZone">
                            <input type="file" name="logo" id="logoInput" accept="image/svg+xml,image/png,image/jpeg,image/webp">
                            <div class="logo-icon">üè∑Ô∏è</div>
                            <div class="logo-text">
                                <strong>Raahaa logo t√§h√§n</strong>
                                <span>tai klikkaa valitaksesi</span>
                            </div>
                            <div class="logo-hint">Suositeltu: SVG, PNG tai JPEG ‚Ä¢ Kuvat pakataan automaattisesti</div>
                        </div>
                        <div class="error-message" id="logoError"></div>
                        <div class="compression-info" id="logoCompressionInfo" style="display: none;"></div>
                        <div class="image-preview-container" id="logoPreviewContainer">
                            <div class="preview-header">
                                <span class="preview-count">Logo valittu</span>
                                <button type="button" class="clear-all-btn" onclick="clearLogo()">Poista</button>
                            </div>
                            <div class="image-preview-grid" id="logoPreviewGrid"></div>
                        </div>
                    </div>

                    <!-- Kuvat -->
                    <div class="form-group">
                        <label>Lis√§√§ kuvia (valinnainen, max 10 kuvaa)</label>
                        <div class="file-upload-area" id="dropZone">
                            <input type="file" name="kuvat" id="fileInput" multiple accept="image/*">
                            <div class="upload-icon">üìÅ</div>
                            <div class="upload-text">
                                <strong>Klikkaa lis√§t√§ksesi kuvia</strong>
                                <span>tai raahaa ne t√§h√§n</span>
                            </div>
                            <div class="upload-limit">Max 10 kuvaa ‚Ä¢ Kuvat pakataan automaattisesti ennen l√§hetyst√§</div>
                            <div class="upload-alternative">
                                tai l√§het√§ s√§hk√∂postilla <a href="mailto:sivut@sivutnopeasti.fi">sivut@sivutnopeasti.fi</a>
                            </div>
                        </div>
                        <div class="error-message" id="uploadError"></div>
                        <div class="compression-info" id="compressionInfo" style="display: none;"></div>
                        <div class="image-preview-container" id="imagePreviewContainer">
                            <div class="preview-header">
                                <span class="preview-count" id="previewCount">Valittuja kuvia: 0 / 10</span>
                                <button type="button" class="clear-all-btn" onclick="clearAllImages()">Poista kaikki</button>
                            </div>
                            <div class="image-preview-grid" id="imagePreviewGrid"></div>
                        </div>
                    </div>

                    <!-- UUSI TEKSTIKENTT√Ñ: Kerro vapaasti toiveistasi -->
                    <div class="form-group">
                        <label for="vapaat_toiveet">Kerro vapaasti toiveistasi</label>
                        <textarea name="vapaat_toiveet" id="vapaat_toiveet" placeholder="Kerro t√§h√§n vapaasti toiveistasi. Mit√§ tyyli√§, tunnelmaa tai v√§rej√§ kaipaat? Onko olemassa sivustoja, joista pid√§t? Mit√§ haluat sivuillasi ehdottomasti olevan? Mit√§ yksityiskohtia pid√§t t√§rke√§n√§? Mit√§ enemm√§n kerrot, sit√§ paremmin voimme toteuttaa juuri sinulle sopivat sivut. Voit my√∂s liitt√§√§ linkkej√§ inspiraatioksi!"></textarea>
                        <div class="hint">Mit√§ tarkemmin kerrot toiveistasi, sit√§ paremmin pystymme toteuttaa juuri sinulle sopivat sivut. Ei ole v√§√§ri√§ vastauksia!</div>
                    </div>

                    <div class="form-group">
                        <label for="paketti">Valitse paketti <span class="required">*</span></label>
                        <select name="paketti" id="paketti" required>
                            <option value="">Valitse...</option>
                            <option value="12kk">169 ‚Ç¨ + 8,90 ‚Ç¨ / kk (laskutus 12 kk v√§lein)</option>
                            <option value="1kk">169 ‚Ç¨ + 8,90 ‚Ç¨ / kk (laskutus 1 kk v√§lein)</option>
                            <option value="ei_tieda">En ole varma, keskustellaan</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="toiveet">Lis√§toiveet</label>
                        <textarea name="toiveet" id="toiveet" placeholder="Galleria, blogi, lahjakortit..."></textarea>
                    </div>

                    <div class="summary-box">
                        <h3 style="font-family: 'Playfair Display', serif; margin-bottom: 1rem;">Valintasi</h3>
                        <div class="summary-item">
                            <span>Tyyli:</span>
                            <span id="summaryTyyli" class="change-link" onclick="goToStep(2)">Vaihda</span>
                        </div>
                        <div class="summary-item">
                            <span>Fontti:</span>
                            <span id="summaryFontti" class="change-link" onclick="goToStep(3)">Vaihda</span>
                        </div>
                        <div class="summary-item">
                            <span>V√§riteema:</span>
                            <span id="summaryVari" class="change-link" onclick="goToStep(4)">Vaihda</span>
                        </div>
                        <div class="summary-item" id="summaryHexRow" style="display: none;">
                            <span>Oma v√§ri:</span>
                            <span id="summaryHex"></span>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="prevStep()">‚Üê Takaisin</button>
                        <div>
                            <button type="button" class="btn btn-text" onclick="goToStep(2)">Vaihda tyyli√§</button>
                            <button type="submit" class="btn btn-primary" id="submitBtn">L√§het√§ tilaus</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Laajennettu fonttikokoelma (10+ per tyyli)
        const fontit = {
            klassinen: [
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Merriweather', esimerkki: 'Aa', class: 'Merriweather' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' },
                { nimi: 'Cinzel', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Old Standard TT', esimerkki: 'Aa', class: 'Old Standard TT' },
                { nimi: 'Cardo', esimerkki: 'Aa', class: 'Cardo' },
                { nimi: 'Frank Ruhl Libre', esimerkki: 'Aa', class: 'Frank Ruhl Libre' },
                { nimi: 'DM Serif Display', esimerkki: 'Aa', class: 'DM Serif Display' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' }
            ],
            moderni: [
                { nimi: 'Inter', esimerkki: 'Aa', class: 'Inter' },
                { nimi: 'Roboto', esimerkki: 'Aa', class: 'Roboto' },
                { nimi: 'Montserrat', esimerkki: 'Aa', class: 'Montserrat' },
                { nimi: 'Raleway', esimerkki: 'Aa', class: 'Raleway' },
                { nimi: 'Poppins', esimerkki: 'Aa', class: 'Poppins' },
                { nimi: 'Work Sans', esimerkki: 'Aa', class: 'Work Sans' },
                { nimi: 'Bebas Neue', esimerkki: 'Aa', class: 'Bebas Neue' },
                { nimi: 'Oswald', esimerkki: 'Aa', class: 'Oswald' },
                { nimi: 'Sora', esimerkki: 'Aa', class: 'Sora' },
                { nimi: 'Manrope', esimerkki: 'Aa', class: 'Manrope' },
                { nimi: 'Outfit', esimerkki: 'Aa', class: 'Outfit' },
                { nimi: 'Plus Jakarta Sans', esimerkki: 'Aa', class: 'Plus Jakarta Sans' }
            ],
            luksus: [
                { nimi: 'Cinzel', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Great Vibes', esimerkki: 'Aa', class: 'Great Vibes' },
                { nimi: 'Abril Fatface', esimerkki: 'Aa', class: 'Abril Fatface' },
                { nimi: 'Yeseva One', esimerkki: 'Aa', class: 'Yeseva One' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Cinzel Decorative', esimerkki: 'Aa', class: 'Cinzel' },
                { nimi: 'Cardo', esimerkki: 'Aa', class: 'Cardo' },
                { nimi: 'Old Standard TT', esimerkki: 'Aa', class: 'Old Standard TT' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' }
            ],
            kotoisa: [
                { nimi: 'Merriweather', esimerkki: 'Aa', class: 'Merriweather' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' },
                { nimi: 'Nunito', esimerkki: 'Aa', class: 'Nunito' },
                { nimi: 'Quicksand', esimerkki: 'Aa', class: 'Quicksand' },
                { nimi: 'Source Sans Pro', esimerkki: 'Aa', class: 'Source Sans Pro' },
                { nimi: 'Ubuntu', esimerkki: 'Aa', class: 'Ubuntu' },
                { nimi: 'Josefin Slab', esimerkki: 'Aa', class: 'Josefin Slab' },
                { nimi: 'Zilla Slab', esimerkki: 'Aa', class: 'Zilla Slab' },
                { nimi: 'Karla', esimerkki: 'Aa', class: 'Karla' },
                { nimi: 'Rubik', esimerkki: 'Aa', class: 'Rubik' },
                { nimi: 'Work Sans', esimerkki: 'Aa', class: 'Work Sans' },
                { nimi: 'Manrope', esimerkki: 'Aa', class: 'Manrope' }
            ],
            elegantti: [
                { nimi: 'Great Vibes', esimerkki: 'Aa', class: 'Great Vibes' },
                { nimi: 'Dancing Script', esimerkki: 'Aa', class: 'Dancing Script' },
                { nimi: 'Playfair Display', esimerkki: 'Aa', class: 'Playfair Display' },
                { nimi: 'Cormorant Garamond', esimerkki: 'Aa', class: 'Cormorant Garamond' },
                { nimi: 'Libre Baskerville', esimerkki: 'Aa', class: 'Libre Baskerville' },
                { nimi: 'Pacifico', esimerkki: 'Aa', class: 'Pacifico' },
                { nimi: 'Prata', esimerkki: 'Aa', class: 'Prata' },
                { nimi: 'Yeseva One', esimerkki: 'Aa', class: 'Yeseva One' },
                { nimi: 'Frank Ruhl Libre', esimerkki: 'Aa', class: 'Frank Ruhl Libre' },
                { nimi: 'Cormorant', esimerkki: 'Aa', class: 'Cormorant' },
                { nimi: 'DM Serif Display', esimerkki: 'Aa', class: 'DM Serif Display' },
                { nimi: 'Lora', esimerkki: 'Aa', class: 'Lora' }
            ],
            creative: [
                { nimi: 'Bebas Neue', esimerkki: 'Aa', class: 'Bebas Neue' },
                { nimi: 'Righteous', esimerkki: 'Aa', class: 'Righteous' },
                { nimi: 'Space Grotesk', esimerkki: 'Aa', class: 'Space Grotesk' },
                { nimi: 'Fredoka', esimerkki: 'Aa', class: 'Fredoka' },
                { nimi: 'Montserrat', esimerkki: 'Aa', class: 'Montserrat' },
                { nimi: 'Poppins', esimerkki: 'Aa', class: 'Poppins' },
                { nimi: 'Rubik', esimerkki: 'Aa', class: 'Rubik' },
                { nimi: 'Josefin Sans', esimerkki: 'Aa', class: 'Josefin Sans' },
                { nimi: 'Syne', esimerkki: 'Aa', class: 'Syne' },
                { nimi: 'Outfit', esimerkki: 'Aa', class: 'Outfit' },
                { nimi: 'Sora', esimerkki: 'Aa', class: 'Sora' },
                { nimi: 'Plus Jakarta Sans', esimerkki: 'Aa', class: 'Plus Jakarta Sans' }
            ]
        };

        const varit = {
            klassinen: [
                { nimi: 'Kerma & Tumma vihre√§', gradient: 'linear-gradient(135deg, #f5f5dc 0%, #1a5f4a 100%)' },
                { nimi: 'Valkoinen & Laivastonsininen', gradient: 'linear-gradient(135deg, #ffffff 0%, #1e3a5f 100%)' },
                { nimi: 'Beige & Ruskea', gradient: 'linear-gradient(135deg, #f4e4c1 0%, #8b6914 100%)' },
                { nimi: 'Harmaa & Musta', gradient: 'linear-gradient(135deg, #e0e0e0 0%, #1a1a1a 100%)' },
                { nimi: 'Kulta & Kerma', gradient: 'linear-gradient(135deg, #ffd700 0%, #f5f5dc 100%)' },
                { nimi: 'Burgundinpunainen & Kulta', gradient: 'linear-gradient(135deg, #800020 0%, #ffd700 100%)' }
            ],
            moderni: [
                { nimi: 'Mustavalkoinen', gradient: 'linear-gradient(135deg, #ffffff 0%, #1a1a1a 100%)' },
                { nimi: 'Harmaas√§vyinen', gradient: 'linear-gradient(135deg, #f5f5f5 0%, #4a4a4a 100%)' },
                { nimi: 'Sininen & Valkoinen', gradient: 'linear-gradient(135deg, #e8f4f8 0%, #1e3a5f 100%)' },
                { nimi: 'Vihre√§ & Valkoinen', gradient: 'linear-gradient(135deg, #f0f9f4 0%, #1a5f4a 100%)' },
                { nimi: 'Oranssi & Harmaa', gradient: 'linear-gradient(135deg, #fff5f0 0%, #ff6b35 100%)' },
                { nimi: 'Liila & Valkoinen', gradient: 'linear-gradient(135deg, #f3e8ff 0%, #7c3aed 100%)' }
            ],
            luksus: [
                { nimi: 'Kulta & Musta', gradient: 'linear-gradient(135deg, #ffd700 0%, #1a1a1a 100%)' },
                { nimi: 'Samppanja & Laivastonsininen', gradient: 'linear-gradient(135deg, #f7e7ce 0%, #1e3a5f 100%)' },
                { nimi: 'Hopea & Tummanharmaa', gradient: 'linear-gradient(135deg, #c0c0c0 0%, #4a4a4a 100%)' },
                { nimi: 'Burgundinpunainen & Kulta', gradient: 'linear-gradient(135deg, #800020 0%, #ffd700 100%)' },
                { nimi: 'Musta & Valkoinen', gradient: 'linear-gradient(135deg, #1a1a1a 0%, #ffffff 100%)' },
                { nimi: 'Emerald & Kulta', gradient: 'linear-gradient(135deg, #50c878 0%, #ffd700 100%)' }
            ],
            kotoisa: [
                { nimi: 'L√§mpim√§ beige', gradient: 'linear-gradient(135deg, #f4e4c1 0%, #d4a574 100%)' },
                { nimi: 'Maanl√§heinen vihre√§', gradient: 'linear-gradient(135deg, #e8f5e9 0%, #2d5016 100%)' },
                { nimi: 'Puu & Ruskea', gradient: 'linear-gradient(135deg, #deb887 0%, #8b4513 100%)' },
                { nimi: 'Terrakotta & Kerma', gradient: 'linear-gradient(135deg, #e2725b 0%, #f5f5dc 100%)' },
                { nimi: 'Sinapinkeltainen & Harmaa', gradient: 'linear-gradient(135deg, #ffdb58 0%, #808080 100%)' },
                { nimi: 'Oliivi & Kerma', gradient: 'linear-gradient(135deg, #808000 0%, #f5f5dc 100%)' }
            ],
            elegantti: [
                { nimi: 'Roosa & Kulta', gradient: 'linear-gradient(135deg, #ffb6c1 0%, #ffd700 100%)' },
                { nimi: 'Laventeli & Valkoinen', gradient: 'linear-gradient(135deg, #e6e6fa 0%, #ffffff 100%)' },
                { nimi: 'Laivastonsininen & Hopea', gradient: 'linear-gradient(135deg, #1e3a5f 0%, #c0c0c0 100%)' },
                { nimi: 'Minttu & Valkoinen', gradient: 'linear-gradient(135deg, #f0fff0 0%, #98ff98 100%)' },
                { nimi: 'Vanha roosa & Harmaa', gradient: 'linear-gradient(135deg, #c08081 0%, #808080 100%)' },
                { nimi: 'Persikka & Kulta', gradient: 'linear-gradient(135deg, #ffdab9 0%, #ffd700 100%)' }
            ],
            creative: [
                { nimi: 'Rohkea punainen & Sininen', gradient: 'linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)' },
                { nimi: 'S√§hk√∂sininen & Keltainen', gradient: 'linear-gradient(135deg, #00d2ff 0%, #ffd700 100%)' },
                { nimi: 'Purppura & Oranssi', gradient: 'linear-gradient(135deg, #9b59b6 0%, #f39c12 100%)' },
                { nimi: 'Turkoosi & Koralli', gradient: 'linear-gradient(135deg, #40e0d0 0%, #ff7f50 100%)' },
                { nimi: 'Neonvihre√§ & Musta', gradient: 'linear-gradient(135deg, #39ff14 0%, #1a1a1a 100%)' },
                { nimi: 'Magenta & Syaani', gradient: 'linear-gradient(135deg, #ff00ff 0%, #00ffff 100%)' }
            ]
        };

        let currentStep = 1;
        let selectedStyle = null;
        let selectedFiles = [];
        let logoFile = null;
        const MAX_FILES = 10;
        let useCustomColors = false;

        // Color picker
        const colorPicker = document.getElementById('colorPicker');
        const hexInput = document.getElementById('hexInput');
        const colorPreview = document.getElementById('colorPreview');
        const colorDisplay = document.getElementById('colorDisplay');
        const customColorValue = document.getElementById('customColorValue');

        function updateColor(color) {
            const secondary = adjustBrightness(color, -30);
            colorPreview.style.background = `linear-gradient(135deg, ${color} 0%, ${secondary} 100%)`;
            colorDisplay.textContent = `${color} ‚Üí ${secondary}`;
            customColorValue.value = `${color},${secondary}`;
            
            const brightness = getBrightness(color);
            const textColor = brightness > 128 ? '#1a1a1a' : '#ffffff';
            const subtextColor = brightness > 128 ? 'rgba(26,26,26,0.7)' : 'rgba(255,255,255,0.8)';
            
            colorPreview.querySelector('.preview-text').style.color = textColor;
            colorPreview.querySelector('.preview-subtext').style.color = subtextColor;
            updateSummary();
        }

        function adjustBrightness(hex, percent) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.max(0, Math.min(255, (num >> 16) + amt));
            const G = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amt));
            const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }

        function getBrightness(hex) {
            const rgb = parseInt(hex.replace('#', ''), 16);
            const r = (rgb >> 16) & 0xff;
            const g = (rgb >> 8) & 0xff;
            const b = (rgb >> 0) & 0xff;
            return 0.2126 * r + 0.7152 * g + 0.0722 * b;
        }

        colorPicker.addEventListener('input', (e) => {
            const color = e.target.value;
            hexInput.value = color.replace('#', '');
            updateColor(color);
        });

        hexInput.addEventListener('input', (e) => {
            let hex = e.target.value.replace(/[^0-9A-F]/gi, '').substring(0, 6);
            e.target.value = hex;
            if (hex.length === 6) {
                const fullHex = '#' + hex;
                colorPicker.value = fullHex;
                updateColor(fullHex);
            }
        });

        function selectStyle(style) {
            selectedStyle = style;
            document.getElementById('tyyliSeuraava').disabled = false;
            updateSummary();
        }

        function generateFonts() {
            if (!selectedStyle) return;
            const grid = document.getElementById('fonttiGrid');
            const f = fontit[selectedStyle];
            document.getElementById('fonttiSubtitle').textContent = `Valitse ${selectedStyle} tyyliin sopiva fontti`;
            
            grid.innerHTML = f.map((font, i) => `
                <label class="option-card" onclick="selectFont('${font.nimi}', this)">
                    <input type="radio" name="valittu_fontti" value="${font.nimi}" required>
                    <div class="font-preview" style="font-family: '${font.class}'">${font.esimerkki}</div>
                    <div class="font-name">${font.nimi}</div>
                </label>
            `).join('');
        }

        function selectFont(name, el) {
            document.getElementById('fonttiSeuraava').disabled = false;
            document.querySelectorAll('#fonttiGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            updateSummary();
        }

        function generateColors() {
            if (!selectedStyle) return;
            const grid = document.getElementById('variGrid');
            const v = varit[selectedStyle];
            document.getElementById('variSubtitle').textContent = `Valitse ${selectedStyle} tyyliin sopiva v√§riteema`;
            
            const customColorsCard = `
                <label class="option-card custom-colors" onclick="selectCustomColors(this)">
                    <input type="radio" name="valittu_variteema" value="Omat v√§rit" id="customColorsRadio">
                    <div class="custom-icon">üé®</div>
                    <div class="color-name">K√§yt√§ omia v√§rej√§</div>
                </label>
            `;
            
            const colorCards = v.map((vari, i) => `
                <label class="option-card" onclick="selectColor('${vari.nimi}', this)">
                    <input type="radio" name="valittu_variteema" value="${vari.nimi}" required>
                    <div class="color-preview" style="background: ${vari.gradient}"></div>
                    <div class="color-name">${vari.nimi}</div>
                </label>
            `).join('');
            
            grid.innerHTML = customColorsCard + colorCards;
        }

        function selectCustomColors(el) {
            useCustomColors = true;
            document.getElementById('variSeuraava').disabled = false;
            document.querySelectorAll('#variGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            document.getElementById('customColorSection').style.display = 'block';
            updateSummary();
        }

        function selectColor(name, el) {
            useCustomColors = false;
            document.getElementById('variSeuraava').disabled = false;
            document.querySelectorAll('#variGrid .option-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            el.querySelector('input').checked = true;
            document.getElementById('customColorSection').style.display = 'none';
            document.getElementById('customColorValue').value = '';
            updateSummary();
        }

        function updateSummary() {
            const tyyli = document.querySelector('input[name="valittu_tyyli"]:checked');
            const fontti = document.querySelector('input[name="valittu_fontti"]:checked');
            const vari = document.querySelector('input[name="valittu_variteema"]:checked');
            const hex = document.getElementById('customColorValue').value;
            
            if (tyyli) document.getElementById('summaryTyyli').textContent = tyyli.value;
            if (fontti) document.getElementById('summaryFontti').textContent = fontti.value;
            if (vari) document.getElementById('summaryVari').textContent = vari.value;
            
            if (hex && useCustomColors) {
                document.getElementById('summaryHexRow').style.display = 'flex';
                document.getElementById('summaryHex').textContent = hex.split(',')[0];
            } else {
                document.getElementById('summaryHexRow').style.display = 'none';
            }
        }

        function updateProgress() {
            document.querySelectorAll('.progress-step').forEach((step, idx) => {
                step.classList.remove('active', 'completed');
                if (idx + 1 < currentStep) step.classList.add('completed');
                else if (idx + 1 === currentStep) step.classList.add('active');
            });
            document.getElementById('progressBar').setAttribute('aria-valuenow', currentStep);
        }

        function showStep(step) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelector(`[data-section="${step}"]`).classList.add('active');
            currentStep = step;
            updateProgress();
            window.scrollTo(0, 0);
        }

        function nextStep() {
            const section = document.querySelector(`[data-section="${currentStep}"]`);
            const required = section.querySelectorAll('[required]');
            let valid = true;

            required.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#dc2626';
                    valid = false;
                } else {
                    field.style.borderColor = '';
                }
            });

            if (!valid) return;

            if (currentStep === 2) generateFonts();
            if (currentStep === 3) generateColors();
            
            if (currentStep < 5) showStep(currentStep + 1);
        }

        function prevStep() {
            if (currentStep > 1) showStep(currentStep - 1);
        }

        function goToStep(step) {
            showStep(step);
        }

        // KUVANK√ÑSITTELY JA PAKKAUS

        // Pakkaa kuva canvasin kautta
        async function compressImage(file, maxWidth = 1200, maxHeight = 1200, quality = 0.7) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        // S√§ilyt√§ mittasuhteet
                        if (width > height) {
                            if (width > maxWidth) {
                                height *= maxWidth / width;
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width *= maxHeight / height;
                                height = maxHeight;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Muunna blobiksi
                        canvas.toBlob((blob) => {
                            if (blob) {
                                // Luo uusi tiedosto
                                const compressedFile = new File([blob], file.name, {
                                    type: 'image/jpeg',
                                    lastModified: Date.now()
                                });
                                resolve({
                                    file: compressedFile,
                                    originalSize: file.size,
                                    compressedSize: blob.size,
                                    reduction: ((file.size - blob.size) / file.size * 100).toFixed(1)
                                });
                            } else {
                                reject(new Error('Pakkaus ep√§onnistui'));
                            }
                        }, 'image/jpeg', quality);
                    };
                    img.onerror = reject;
                    img.src = event.target.result;
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // Logo handling
        async function handleLogo(file) {
            const errorDiv = document.getElementById('logoError');
            const infoDiv = document.getElementById('logoCompressionInfo');
            errorDiv.textContent = '';
            errorDiv.classList.remove('show');
            infoDiv.style.display = 'none';
            
            if (!file.type.startsWith('image/')) {
                showLogoError('Valitse kuvatiedosto (SVG, PNG, JPEG)');
                return;
            }
            
            try {
                // Pakkaa logo
                const compressed = await compressImage(file, 800, 800, 0.8);
                logoFile = compressed.file;
                
                // N√§yt√§ pakkaustiedot
                infoDiv.textContent = `Pakattu: ${(compressed.originalSize / 1024 / 1024).toFixed(2)}MB ‚Üí ${(compressed.compressedSize / 1024).toFixed(0)}KB (${compressed.reduction}% pienempi)`;
                infoDiv.style.display = 'block';
                
                updateLogoPreview();
            } catch (error) {
                console.error('Virhe logon pakkaamisessa:', error);
                // Jos pakkaus ep√§onnistuu, k√§yt√§ alkuper√§ist√§
                logoFile = file;
                updateLogoPreview();
            }
        }

        function showLogoError(msg) {
            const errorDiv = document.getElementById('logoError');
            errorDiv.textContent = msg;
            errorDiv.classList.add('show');
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }

        function updateLogoPreview() {
            const container = document.getElementById('logoPreviewContainer');
            const grid = document.getElementById('logoPreviewGrid');
            
            container.classList.add('has-images');
            const url = URL.createObjectURL(logoFile);
            grid.innerHTML = `
                <div class="image-preview-item">
                    <img src="${url}" alt="${logoFile.name}">
                    <button type="button" class="image-remove-btn" onclick="clearLogo()">√ó</button>
                    <div class="image-file-name" title="${logoFile.name}">${logoFile.name}</div>
                </div>
            `;
        }

        function clearLogo() {
            logoFile = null;
            document.getElementById('logoPreviewContainer').classList.remove('has-images');
            document.getElementById('logoPreviewGrid').innerHTML = '';
            document.getElementById('logoCompressionInfo').style.display = 'none';
            document.getElementById('logoInput').value = '';
        }

        // Logo event listeners
        const logoDropZone = document.getElementById('logoDropZone');
        ['dragenter', 'dragover'].forEach(e => {
            logoDropZone.addEventListener(e, ev => {
                ev.preventDefault();
                logoDropZone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(e => {
            logoDropZone.addEventListener(e, ev => {
                ev.preventDefault();
                logoDropZone.classList.remove('dragover');
            });
        });
        logoDropZone.addEventListener('drop', e => {
            if (e.dataTransfer.files.length > 0) {
                handleLogo(e.dataTransfer.files[0]);
            }
        });
        document.getElementById('logoInput').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                handleLogo(e.target.files[0]);
            }
        });

        // General images handling
        async function handleFiles(files) {
            const errorDiv = document.getElementById('uploadError');
            const infoDiv = document.getElementById('compressionInfo');
            errorDiv.textContent = '';
            errorDiv.classList.remove('show');
            
            const newFiles = Array.from(files).filter(f => f.type.startsWith('image/'));
            if (newFiles.length === 0) {
                showUploadError('Valitse vain kuvatiedostoja');
                return;
            }
            
            if (selectedFiles.length + newFiles.length > MAX_FILES) {
                const remaining = MAX_FILES - selectedFiles.length;
                if (remaining <= 0) {
                    showUploadError(`Voit lis√§t√§ enint√§√§n ${MAX_FILES} kuvaa`);
                    return;
                }
                showUploadError(`Lis√§ttiin ${Math.min(newFiles.length, remaining)} kuvaa. Raja t√§ynn√§.`);
            }
            
            const remaining = MAX_FILES - selectedFiles.length;
            const filesToProcess = newFiles.slice(0, remaining);
            
            // Pakkaa kaikki kuvat
            const compressionResults = [];
            for (const file of filesToProcess) {
                try {
                    const compressed = await compressImage(file, 1200, 1200, 0.7);
                    selectedFiles.push(compressed.file);
                    compressionResults.push(compressed);
                } catch (error) {
                    console.error('Virhe kuvan pakkaamisessa:', error);
                    selectedFiles.push(file);
                }
            }
            
            // N√§yt√§ pakkaustiedot
            if (compressionResults.length > 0) {
                const totalOriginal = compressionResults.reduce((sum, r) => sum + r.originalSize, 0);
                const totalCompressed = compressionResults.reduce((sum, r) => sum + r.compressedSize, 0);
                const avgReduction = ((totalOriginal - totalCompressed) / totalOriginal * 100).toFixed(1);
                infoDiv.textContent = `Pakattu ${compressionResults.length} kuvaa: yhteens√§ ${(totalOriginal / 1024 / 1024).toFixed(2)}MB ‚Üí ${(totalCompressed / 1024).toFixed(0)}KB (${avgReduction}% pienempi)`;
                infoDiv.style.display = 'block';
            }
            
            updatePreview();
            updateUpload();
        }

        function showUploadError(msg) {
            const errorDiv = document.getElementById('uploadError');
            errorDiv.textContent = msg;
            errorDiv.classList.add('show');
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }

        function updatePreview() {
            const container = document.getElementById('imagePreviewContainer');
            const grid = document.getElementById('imagePreviewGrid');
            const count = document.getElementById('previewCount');
            
            count.textContent = `Valittuja kuvia: ${selectedFiles.length} / ${MAX_FILES}`;
            count.classList.toggle('max', selectedFiles.length >= MAX_FILES);
            container.classList.toggle('has-images', selectedFiles.length > 0);
            
            grid.innerHTML = selectedFiles.map((file, i) => {
                const url = URL.createObjectURL(file);
                return `
                    <div class="image-preview-item">
                        <img src="${url}" alt="${file.name}">
                        <button type="button" class="image-remove-btn" onclick="removeImage(${i})">√ó</button>
                        <div class="image-file-name" title="${file.name}">${file.name}</div>
                    </div>
                `;
            }).join('');
        }

        function updateUpload() {
            const zone = document.getElementById('dropZone');
            const input = document.getElementById('fileInput');
            if (selectedFiles.length >= MAX_FILES) {
                zone.classList.add('disabled');
                input.disabled = true;
            } else {
                zone.classList.remove('disabled');
                input.disabled = false;
            }
        }

        function removeImage(i) {
            selectedFiles.splice(i, 1);
            updatePreview();
            updateUpload();
        }

        function clearAllImages() {
            selectedFiles = [];
            document.getElementById('compressionInfo').style.display = 'none';
            updatePreview();
            updateUpload();
        }

        // General images event listeners
        const dropZone = document.getElementById('dropZone');
        ['dragenter', 'dragover'].forEach(e => {
            dropZone.addEventListener(e, ev => {
                ev.preventDefault();
                if (selectedFiles.length < MAX_FILES) dropZone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(e => {
            dropZone.addEventListener(e, ev => {
                ev.preventDefault();
                dropZone.classList.remove('dragover');
            });
        });
        dropZone.addEventListener('drop', e => {
            if (selectedFiles.length < MAX_FILES) handleFiles(e.dataTransfer.files);
        });
        document.getElementById('fileInput').addEventListener('change', function(e) {
            handleFiles(e.target.files);
        });

        // Form submission - korvaa tiedostot pakatuilla
        document.getElementById('tilausForm').addEventListener('submit', function(e) {
            document.getElementById('loadingOverlay').classList.add('show');
            document.getElementById('submitBtn').disabled = true;
            
            // Korvaa logo pakatulla versiolla
            if (logoFile) {
                const logoInput = document.getElementById('logoInput');
                const dt = new DataTransfer();
                dt.items.add(logoFile);
                logoInput.files = dt.files;
            }
            
            // Korvaa kuvat pakatuilla versioilla
            if (selectedFiles.length > 0) {
                const fileInput = document.getElementById('fileInput');
                const dt = new DataTransfer();
                selectedFiles.forEach(file => dt.items.add(file));
                fileInput.files = dt.files;
            }
            
            document.getElementById('loadingText').textContent = 'L√§hetet√§√§n tilausta...';
        });

        // Hinnasto ‚Äì vaihda teksti/tiedosto
        function switchHinnasto(mode) {
            const tabs = document.querySelectorAll('.hinnasto-tab');
            const textSection = document.getElementById('hinnastoTextSection');
            const fileSection = document.getElementById('hinnastoFileSection');
            if (mode === 'text') {
                tabs[0].classList.add('active');
                tabs[1].classList.remove('active');
                textSection.style.display = '';
                fileSection.style.display = 'none';
                document.getElementById('hinnastoFileInput').value = '';
                document.getElementById('hinnastoFileInfo').classList.remove('show');
            } else {
                tabs[0].classList.remove('active');
                tabs[1].classList.add('active');
                textSection.style.display = 'none';
                fileSection.style.display = '';
                document.getElementById('hinnasto').value = '';
            }
        }

        document.getElementById('hinnastoFileInput').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                document.getElementById('hinnastoFileName').textContent = e.target.files[0].name;
                document.getElementById('hinnastoFileInfo').classList.add('show');
            }
        });

        function clearHinnastoFile() {
            document.getElementById('hinnastoFileInput').value = '';
            document.getElementById('hinnastoFileInfo').classList.remove('show');
        }

        // Drag & drop hinnasto
        const hinnastoDropZone = document.getElementById('hinnastoDropZone');
        ['dragenter', 'dragover'].forEach(ev => {
            hinnastoDropZone.addEventListener(ev, e => { e.preventDefault(); hinnastoDropZone.classList.add('dragover'); });
        });
        ['dragleave', 'drop'].forEach(ev => {
            hinnastoDropZone.addEventListener(ev, e => { hinnastoDropZone.classList.remove('dragover'); });
        });
        hinnastoDropZone.addEventListener('drop', e => {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const dt = new DataTransfer();
                dt.items.add(files[0]);
                document.getElementById('hinnastoFileInput').files = dt.files;
                document.getElementById('hinnastoFileName').textContent = files[0].name;
                document.getElementById('hinnastoFileInfo').classList.add('show');
            }
        });

        // Real-time validation
        document.querySelectorAll('input, textarea, select').forEach(field => {
            field.addEventListener('input', function() {
                if (this.value.trim()) this.style.borderColor = '';
            });
        });

        // Initialize
        updateColor('#1a5f4a');
    </script>
</body>
</html>
